%PDF-1.3
%ºß¬à
3 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 4 0 R
>>
endobj
4 0 obj
<<
/Length 10002
>>
stream
0.5670000000000001 w
0 G
q
96.3779527559055254 0 0 19.8425196850393704 28.3464566929133888 810.7088976377953031 cm
/I0 Do
Q
BT
/F2 20 Tf
23. TL
0.404 0.22 0.816 rg
160.4399999999999977 785.1970866141732586 Td
(AI SCAN ANALYSIS REPORT) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.118 g
28.3464566929133888 756.8506299212598378 Td
(Repository: saii-1903/13-arrythmia-project) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.118 g
28.3464566929133888 739.8427559055118081 Td
(Scan ID: rtzoefzsah) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.118 g
28.3464566929133888 722.8348818897637784 Td
(Branch: main) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.118 g
28.3464566929133888 705.8270078740157487 Td
(Analysis Date: 05/02/2026, 12:28:57) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.118 g
28.3464566929133888 688.819133858267719 Td
(Total Issues: 109) Tj
ET
0.78 G
0.8503937007874016 w
28.3464566929133888 671.8112598425196893 m
566.933543307086552 671.8112598425196893 l
S
BT
/F2 10 Tf
11.5 TL
0. g
28.3464566929133888 643.4648031496062686 Td
(Scan Prompt) Tj
ET
BT
/F1 9 Tf
10.3499999999999996 TL
0.502 g
28.3464566929133888 626.4569291338582389 Td
(No prompt specified) Tj
ET
BT
/F2 12 Tf
13.7999999999999989 TL
0. g
28.3464566929133888 585.3545669291338527 Td
(Analysis Results) Tj
ET
BT
/F1 8 Tf
9.1999999999999993 TL
0.42 0.447 0.502 rg
28.3464566929133888 571.1813385826771992 Td
(Total Issues Found: 109) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 548.5041732283464171 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 536.8848818897637329 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 548.5041732283464171 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 536.8848818897637329 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 548.5041732283464171 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 536.8848818897637329 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 548.5041732283464171 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 536.8848818897637329 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 548.5041732283464171 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 536.8848818897637329 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 529.1155905511810715 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 517.4962992125983874 Td
(convert_record) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 529.1155905511810715 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 517.4962992125983874 Td
(wfdb_to_json.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 529.1155905511810715 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 517.4962992125983874 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 529.1155905511810715 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 517.4962992125983874 Td
(21-74) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 529.1155905511810715 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 517.4962992125983874 Td
(1 - When resampling the signal \(fs != 250\), the code does not) Tj
T* (adjust the annotation sample indices \(ann.sample\) to the new) Tj
T* (sampling rate; annotations remain in the original sample-space,) Tj
T* (so beat-to-segment mapping becomes incorrect after resampling.) Tj
T* (- Resampling shortens/lengthens ecg \(ecg = resample\(...\); fs =) Tj
T* (250\) but ann.sample are used unchanged to build beat_labels) Tj
T* (and then compared to segment indices of the resampled signal,) Tj
T* (causing a sample-space mismatch.2 - The try/except lumps all) Tj
T* (FileNotFoundError cases together and prints "Record ... not) Tj
T* (found", which is misleading: a FileNotFoundError raised while) Tj
T* (writing output \(e.g., due to a missing OUTPUT directory\) will) Tj
T* (produce the same message even though the record was read) Tj
T* (successfully. - The entire read/process/write sequence \(including) Tj
T* (fname.write_text\(...\)\) is inside the try, so any FileNotFoundError) Tj
T* (raised during writing is caught and results in the same "Record ...) Tj
T* (not found" message.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 388.977007874015726 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 377.357716535432985 Td
(convert_record) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 388.977007874015726 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 377.357716535432985 Td
(afdb_to_json.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 388.977007874015726 70.8661417322834666 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 377.357716535432985 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 388.977007874015726 56.6929133858267775 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 377.357716535432985 Td
(15-66) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 388.977007874015726 212.6028346456064355 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 377.357716535432985 Td
(1 - The function never ensures OUTPUT \(converted/AFDB\)) Tj
T* (exists before writing files; calling Path.write_text will fail if the) Tj
T* (directory is missing. - Proof: fname = OUTPUT / ... followed by) Tj
T* (fname.write_text\(...\) without any mkdir call will raise) Tj
T* (FileNotFoundError if OUTPUT's parent directory doesn't exist.2 -) Tj
T* (FileNotFoundError is caught and reported as "Record) Tj
T* ({record_name} not found", which is misleading because the same) Tj
T* (exception can arise from missing output directories or other I/O) Tj
T* (issues \(so the error message is incorrect and hides the real) Tj
T* (cause\). - Proof: the except FileNotFoundError handler prints) Tj
T* ("Record ... not found" but the try block includes) Tj
T* (fname.write_text\(...\) which can raise FileNotFoundError for a) Tj
T* (missing output dir, so the message can be incorrect.3 - The code) Tj
T* (assumes ann.aux_note is an iterable of strings and directly) Tj
T* (zips/uses "in" on its elements; if ann.aux_note is None or) Tj
T* (contains non-string entries this will raise TypeError - there is no) Tj
T* (handling for absent/non-string aux_note entries. - Proof:) Tj
T* (zip\(ann.aux_note, ann.sample\) will raise TypeError if) Tj
T* (ann.aux_note is None, and "AFIB" in aos will raise TypeError if) Tj
T* (aos is a non-string non-iterable \(e.g. float\), with no guard in the) Tj
T* (code.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 208.5884251968503804 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 196.9691338582676963 Td
(_load_data_from_json) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 208.5884251968503804 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 196.9691338582676963 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 208.5884251968503804 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 196.9691338582676963 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 208.5884251968503804 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 196.9691338582676963 Td
(61-99) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 208.5884251968503804 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 196.9691338582676963 Td
(1 - The function fails to handle ECG_CH_B when channels are) Tj
T* (provided inside SensorData[0]; it only checks) Tj
T* (SensorData[0]["ECG_CH_A"], so JSON files with SensorData) Tj
T* (containing only "ECG_CH_B" will raise a ValueError despite the) Tj
T* (docstring implying support for ECG_CH_B at least at top-level. -) Tj
T* (Proof: In the SensorData branch the code only tests) Tj
T* ("ECG_CH_A" in row and never looks for "ECG_CH_B", and) Tj
T* (because the top-level channel checks are in elif chained to that if,) Tj
T* (a file with SensorData present but only ECG_CH_B leaves) Tj
T* (signal=None and triggers the ValueError.2 - The function does) Tj
T* (not attempt to read any sampling-rate metadata from the JSON) Tj
T* (\(e.g., fields like "fs", "sampling_rate", or per-record metadata in) Tj
T* (SensorData\) and instead relies solely on filename heuristics; this) Tj
T* (can yield incorrect original_fs for many valid JSON files that) Tj
T* (include their own sampling frequency. - Proof: The code never) Tj
T* (accesses any sampling-rate keys in data or row and only sets) Tj
T* (original_fs based on filename substring checks \(PTBXL/MITDB\),) Tj
T* (so any fs fields in the JSON are ignored.) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 1 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
5 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 6 0 R
>>
endobj
6 0 obj
<<
/Length 12944
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 770.8821259842519567 Td
(_compute_qrs_durations) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 770.8821259842519567 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 770.8821259842519567 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 770.8821259842519567 Td
(218-260) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(1 - The function returns a non-empty fallback np.array\([80.0]\) on) Tj
T* (any exception, while normal "no data" cases return an empty) Tj
T* (array; this inconsistent behavior can bias downstream feature) Tj
T* (computation and model training/retraining logic. - proof: The) Tj
T* (function returns np.array\([]\) in multiple early "no data" branches) Tj
T* (but in the except block returns np.array\([80.0]\) as a fallback.2 - It) Tj
T* (uses a broad try/except that catches all Exceptions, prints the) Tj
T* (error, and swallows it \(returning the fallback\). This masks real) Tj
T* (errors and prevents proper error propagation or logging, harming) Tj
T* (diagnosability and synergistic operation with other components. -) Tj
T* (proof: The code has "except Exception as e: print\(...\); return) Tj
T* (np.array\([80.0]\)", which catches all exceptions and only prints the) Tj
T* (message.3 - Comment and code disagree on the physiological) Tj
T* (QRS filter range \(comment mentions "e.g. 40ms to 250ms" but) Tj
T* (the implemented filter uses 30ms to 300ms\), which is an explicit) Tj
T* (inconsistency in intended vs implemented behavior. - proof: The) Tj
T* (inline comment states 40-250ms while the filter uses) Tj
T* (\(durations_ms >= 30\) & \(durations_ms <= 300\).) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 626.2628346456692725 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 614.6435433070865884 Td
(_sanitize_features) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 626.2628346456692725 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 614.6435433070865884 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 626.2628346456692725 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 614.6435433070865884 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 626.2628346456692725 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 614.6435433070865884 Td
(294-305) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 626.2628346456692725 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 614.6435433070865884 Td
(1 - The function only checks scalar floats \(float and np.floating\)) Tj
T* (and does not recursively sanitize nested containers \(lists, tuples,) Tj
T* (dicts\) or numpy arrays; NaN/Inf values inside those structures will) Tj
T* (remain and violate "Ensure no NaN/Inf for JSONB." - Proof: the) Tj
T* (code only tests isinstance\(v, \(float, np.floating\)\) and otherwise) Tj
T* (assigns the value unchanged, with no recursion or handling for) Tj
T* (lists/tuples/dicts/ndarrays so NaN/Inf inside them are left intact.2 -) Tj
T* (The function does not normalize other non-native numeric types) Tj
T* (\(e.g., np.integer, np.bool_, np.int64, pandas numeric/scalar) Tj
T* (types\) to native Python types, which can leave values that are not) Tj
T* (JSON/JSONB-serializable and therefore fail the intended) Tj
T* (sanitation. - Proof: only float and np.floating are converted to) Tj
T* (native float via float\(v\); other numpy/pandas scalar types are not) Tj
T* (checked or converted and are returned as-is.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 502.2242519685039497 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 490.6049606299212655 Td
(process_and_save_record) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 502.2242519685039497 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 490.6049606299212655 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 502.2242519685039497 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 490.6049606299212655 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 502.2242519685039497 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 490.6049606299212655 Td
(405-494) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 502.2242519685039497 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 490.6049606299212655 Td
(1 - The function never performs model inference or records) Tj
T* (model/training metadata: the DB schema includes) Tj
T* (model_pred_label, model_pred_probs, and training_round, but) Tj
T* (the function does not call any model/prediction routines or) Tj
T* (populate these fields - proof: the CREATE TABLE defines those) Tj
T* (columns but the INSERT only supplies filename, segment_index,) Tj
T* (segment_start_s, segment_duration_s, r_peaks_in_segment,) Tj
T* (features_json and there are no model/prediction calls in the) Tj
T* (function body.  2 - filename_key =) Tj
T* (str\(file_path.relative_to\(DATA_ROOT_DIR\)\) can raise a) Tj
T* (ValueError if file_path is not located under DATA_ROOT_DIR; the) Tj
T* (function does not handle this possibility - proof:) Tj
T* (pathlib.Path.relative_to raises ValueError for out-of-tree paths) Tj
T* (and that call is executed unguarded at the start of the function.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 378.1856692913386269 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 366.5663779527559427 Td
(upload_and_process) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 378.1856692913386269 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 366.5663779527559427 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 378.1856692913386269 70.8661417322834666 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 366.5663779527559427 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 378.1856692913386269 56.6929133858267775 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 366.5663779527559427 Td
(560-584) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 378.1856692913386269 212.6028346456064355 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 366.5663779527559427 Td
(1 - The exception handling returns the raw exception message to) Tj
T* (the client \(f"ERROR: Processing or Database Insertion Failed:) Tj
T* ({e}..."\), exposing internal error details and potentially sensitive) Tj
T* (server information instead of logging the error and returning a) Tj
T* (generic error response. - Proof: the except block returns a) Tj
T* (formatted string containing {e} \(the caught exception\) in the) Tj
T* (HTTP response body.2 - If) Tj
T* (db_service.get_first_segment_id_by_filename\(filename_key\)) Tj
T* (returns a falsy value, the code unconditionally sets) Tj
T* (new_segment_id = 1 and redirects to that segment, which can) Tj
T* (lead to redirecting to a non-existent/incorrect segment ID instead) Tj
T* (of handling "no segments found" explicitly. - Proof: the code does) Tj
T* ("new_segment_id =) Tj
T* (db_service.get_first_segment_id_by_filename\(...\)" followed by "if) Tj
T* (not new_segment_id: new_segment_id = 1" then redirects to that) Tj
T* (ID.3 - The uploaded file's type/content is not validated \(no check) Tj
T* (that the file is valid JSON or has an expected extension/MIME) Tj
T* (type\) before saving and processing, allowing invalid or) Tj
T* (unexpected files to be passed into process_and_save_record. -) Tj
T* (Proof: the handler directly calls file.save\(filepath\) and then) Tj
T* (process_and_save_record\(filepath\) with no content-type,) Tj
T* (extension, or JSON validation.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 189.7470866141733268 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 178.1277952755906426 Td
(api_xai) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 189.7470866141733268 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 178.1277952755906426 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 189.7470866141733268 70.8661417322834666 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 178.1277952755906426 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 189.7470866141733268 56.6929133858267775 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 178.1277952755906426 Td
(591-749) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 189.7470866141733268 212.6028346456064355 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 178.1277952755906426 Td
(1 - The function's exception handling for XAI failures states "The) Tj
T* (model needs to be retrained with the current 9-class list" but) Tj
T* (implements no retraining, logging, scheduling, or flagging) Tj
T* (mechanism - the code only returns a placeholder response. -) Tj
T* (Proof: the except block merely prints the traceback and sets) Tj
T* (pred_label/explanation/saliency placeholders with no calls to any) Tj
T* (retrain/reset/log/schedule function \(reset_model is imported) Tj
T* (elsewhere but not invoked here\).2 - The API returns inconsistent) Tj
T* (response schemas across branches: the short-segment rejection) Tj
T* (returns {"pred_label","confidence","explanation"} while) Tj
T* (artifact-rejection and success paths return) Tj
T* ("probs","saliency","classes" \(and artifact path adds) Tj
T* ("quality_issues"\), which can break clients expecting a stable) Tj
T* (response shape. - Proof: the short-segment branch returns keys) Tj
T* ('pred_label','confidence','explanation', the artifact branch returns ') Tj
T* (pred_label','probs','explanation','saliency','classes','quality_issues') Tj
T* (, and the normal success branch returns) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 2 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
7 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 8 0 R
>>
endobj
8 0 obj
<<
/Length 13532
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
('pred_label','probs','explanation','saliency','classes'.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 763.1128346456691816 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 751.4935433070866111 Td
(annotate_segment) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 763.1128346456691816 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 751.4935433070866111 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 763.1128346456691816 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 751.4935433070866111 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 763.1128346456691816 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 751.4935433070866111 Td
(844-906) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 763.1128346456691816 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 751.4935433070866111 Td
(1 - The function never triggers model update/retraining or reset) Tj
T* (after saving a cardiologist annotation \(no call to reset_model\(\) or) Tj
T* (similar\). - Proof: reset_model is imported at module scope but) Tj
T* (annotate_segment contains no call to reset_model and only calls) Tj
T* (db_service.update_annotation.2 - Validation is insufficient: it only) Tj
T* (checks `segment_id is None` and `doctor_rhythm_label is None`,) Tj
T* (so empty or blank strings \(e.g., ""\) will pass validation and allow) Tj
T* (invalid annotations to be saved. - Proof: code uses `if segment_id) Tj
T* (is None or doctor_rhythm_label is None` which does not reject) Tj
T* (empty strings.3 - In the fallback for old frontends the code sets) Tj
T* (`doctor_ectopy_label = "None"` \(the literal string\) instead of using) Tj
T* (a consistent None/null value or an explicit enum value, creating) Tj
T* (inconsistent typing/semantics for the stored label. - Proof:) Tj
T* (fallback block contains the assignment `doctor_ectopy_label =) Tj
T* ("None"`.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 631.0242519685039042 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 619.4049606299212201 Td
(export_corrected) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 631.0242519685039042 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 619.4049606299212201 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 631.0242519685039042 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 619.4049606299212201 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 631.0242519685039042 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 619.4049606299212201 Td
(913-925) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 631.0242519685039042 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 619.4049606299212201 Td
(1 - The function re-imports export_corrected_segments inside the) Tj
T* (handler even though it is already imported at module level) Tj
T* (\(redundant import\). - proof: the module top contains "from) Tj
T* (export_corrected_segments import export_corrected_segments",) Tj
T* (so the in-handler "from export_corrected_segments import) Tj
T* (export_corrected_segments" is a duplicate.2 - The handler uses) Tj
T* (a broad except Exception and returns str\(e\) directly, which is poor) Tj
T* (error-handling practice and can leak internal error information. -) Tj
T* (proof: the code uses "except Exception as e: return) Tj
T* (jsonify\({'error': str\(e\)}\)", which catches all exceptions and returns) Tj
T* (the raw exception string.3 - The handler calls) Tj
T* (export_corrected_segments synchronously in the request thread;) Tj
T* (if that export is long-running this will block the Flask worker and) Tj
T* (can cause timeouts or poor responsiveness instead of running) Tj
T* (the task asynchronously or in a background job. - proof: the) Tj
T* (handler invokes export_corrected_segments\(\) directly, so its) Tj
T* (execution occurs in the request handler and blocks the Flask) Tj
T* (worker until it returns.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 474.7856692913385928 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 463.1663779527559086 Td
(api_retrain_model) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 474.7856692913385928 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 463.1663779527559086 Td
(app.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 474.7856692913385928 70.8661417322834666 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 463.1663779527559086 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 474.7856692913385928 56.6929133858267775 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 463.1663779527559086 Td
(998-1028) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 474.7856692913385928 212.6028346456064355 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 463.1663779527559086 Td
(1 - The docstring lists xai.reset_model\(\) but the function never) Tj
T* (calls xai.reset_model\(\) \(so the app does not trigger the model) Tj
T* (reset/reload step after starting retraining\). - proof: the function) Tj
T* (body contains no call to reset_model\(\) or xai.reset_model\(\), so) Tj
T* (the documented reset step is not executed.2 - The code opens) Tj
T* ("training_log.txt" in the parent process's current working directory) Tj
T* (while launching the retrain subprocess with cwd set to) Tj
T* (BASE_DIR / "models_training", which will place the log file in the) Tj
T* (wrong directory \(likely unintended and confusing\). - proof:) Tj
T* (open\("training_log.txt", "w"\) is executed in the parent before) Tj
T* (Popen and creates the file in the parent's cwd; Popen\(cwd=...\)) Tj
T* (does not change where that already-open file was created.3 -) Tj
T* (The function starts retraining in the background without any) Tj
T* (check/lock to prevent concurrent retraining processes \(multiple) Tj
T* (calls will spawn multiple retrain.py instances\), which can lead to) Tj
T* (conflicting training runs and resource contention. - proof: the code) Tj
T* (unconditionally calls subprocess.Popen on each request and) Tj
T* (contains no mechanism \(lock, PID check, or flag\) to prevent) Tj
T* (multiple concurrent launches.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 310.4970866141733268 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 298.8777952755906426 Td
(initializeZoom) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 310.4970866141733268 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 298.8777952755906426 Td
(zoom.js) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 310.4970866141733268 70.8661417322834666 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 298.8777952755906426 Td
(ClassMethod) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 310.4970866141733268 56.6929133858267775 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 298.8777952755906426 Td
(11-16) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 310.4970866141733268 212.6028346456064355 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 298.8777952755906426 Td
(1 - initializeZoom only attaches mouse event listeners to the plot) Tj
T* (element and does not attach a global \(document/window\)) Tj
T* (mouseup listener; if the user presses inside the plot, drags) Tj
T* (outside, and releases the mouse outside the element, endZoom) Tj
T* (will not be called and zoom state may be left inconsistent) Tj
T* (\(mouseleave calls cancelZoom rather than completing the zoom\),) Tj
T* (breaking the intended synergy between startZoom and endZoom.) Tj
T* (- Proof: initializeZoom registers 'mouseup' only on this.plot and) Tj
T* (uses 'mouseleave' to call cancelZoom, so a mouseup outside the) Tj
T* (element cannot invoke endZoom.2 - initializeZoom does not) Tj
T* (register touch or pointer event handlers) Tj
T* (\(touchstart/touchmove/touchend or) Tj
T* (pointerdown/pointermove/pointerup\), so zoom interactions will not) Tj
T* (work on touch devices and the functionality is incomplete for) Tj
T* (non-mouse input. - Proof: initializeZoom only adds listeners for) Tj
T* ('mousedown', 'mousemove', 'mouseup', and 'mouseleave' and) Tj
T* (contains no touch or pointer event registrations.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 162.3085039370079983 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 150.6892125984253425 Td
(startZoom) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 162.3085039370079983 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 150.6892125984253425 Td
(zoom.js) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 162.3085039370079983 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 150.6892125984253425 Td
(ClassMethod) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 162.3085039370079983 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 150.6892125984253425 Td
(18-21) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 162.3085039370079983 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 150.6892125984253425 Td
(1 - startZoom does not check which mouse button was pressed) Tj
T* (\(e.g., event.button === 0\), so it will start a zoom on) Tj
T* (right-click/middle-click or other mouse buttons, which can conflict) Tj
T* (with expected UX \(context menu, pan\) and break synergy with) Tj
T* (other handlers. - proof: startZoom unconditionally sets) Tj
T* (this.isZooming = true and uses event.offsetX with no check of) Tj
T* (event.button, so any mousedown \(left/right/middle\) will trigger) Tj
T* (zoom start.2 - startZoom does not call) Tj
T* (event.preventDefault\(\)/stopPropagation\(\), so starting a zoom can) Tj
T* (allow default browser behaviors \(text selection, drag, context) Tj
T* (menu\) that interfere with the intended zoom interaction. - proof:) Tj
T* (the function contains no calls to event.preventDefault\(\) or) Tj
T* (event.stopPropagation\(\), so the browser's default/mouse) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 3 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
9 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 10 0 R
>>
endobj
10 0 obj
<<
/Length 14403
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(handlers remain active when mousedown occurs.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 763.1128346456691816 99.2125984251968589 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 751.4935433070866111 Td
(endZoom) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 763.1128346456691816 99.2125984251968589 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 751.4935433070866111 Td
(zoom.js) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 763.1128346456691816 70.8661417322834666 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 751.4935433070866111 Td
(ClassMethod) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 763.1128346456691816 56.6929133858267775 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 751.4935433070866111 Td
(31-47) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 763.1128346456691816 212.6028346456064355 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 751.4935433070866111 Td
(1 - Leaves this.zoomStart set \(stale\) after both the early return for) Tj
T* (too-small selections and after completing the zoom; only) Tj
T* (isZooming is cleared, which can leave inconsistent internal state) Tj
T* (and cause incorrect behavior in subsequent interactions. - proof:) Tj
T* (endZoom sets this.isZooming = false but never resets) Tj
T* (this.zoomStart \(cancelZoom is the only method that nulls) Tj
T* (zoomStart\), so zoomStart remains the original value on both the) Tj
T* (early-return and success paths.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 687.3742519685039269 99.2125984251968589 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 675.7549606299212428 Td
(getTimeFromPosition) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 687.3742519685039269 99.2125984251968589 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 675.7549606299212428 Td
(zoom.js) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 687.3742519685039269 70.8661417322834666 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 675.7549606299212428 Td
(ClassMethod) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 687.3742519685039269 56.6929133858267775 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 675.7549606299212428 Td
(54-58) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 687.3742519685039269 212.6028346456064355 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 675.7549606299212428 Td
(1 - Does not guard against plot.clientWidth being zero or falsy,) Tj
T* (causing a division by zero and returning NaN/Infinity when) Tj
T* (computing the mapped time. - The code divides by) Tj
T* (this.plot.clientWidth with no check, so if clientWidth === 0 then) Tj
T* (\(x/plotWidth\) is Infinity \(or leads to NaN when multiplied by 0\),) Tj
T* (producing Infinity/NaN and there is no guard to prevent it.2 -) Tj
T* (Does not clamp or validate input x to the plot bounds; values <0) Tj
T* (or >plotWidth will produce times outside the currentTimeRange) Tj
T* (and can lead to incoherent zoom ranges. - The function uses x) Tj
T* (directly in the linear mapping without clamping, so x < 0 yields) Tj
T* (times < currentTimeRange[0] and x > plotWidth yields times >) Tj
T* (currentTimeRange[1].3 - Does not validate that) Tj
T* (this.currentTimeRange is a valid [start,end] numeric pair or that) Tj
T* (timeRange is non-zero, which can produce incorrect results \(or) Tj
T* (NaN\) if the range is malformed or zero. - The code computes) Tj
T* (timeRange = this.currentTimeRange[1] -) Tj
T* (this.currentTimeRange[0] with no checks, so) Tj
T* (non-numeric/malformed entries produce NaN \(and thus the) Tj
T* (function returns NaN\), and if start===end timeRange === 0 the) Tj
T* (function will always return start regardless of x.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 515.0356692913386496 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 503.4163779527559086 Td
(resetZoom) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 515.0356692913386496 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 503.4163779527559086 Td
(zoom.js) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 515.0356692913386496 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 503.4163779527559086 Td
(ClassMethod) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 515.0356692913386496 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 503.4163779527559086 Td
(60-63) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 515.0356692913386496 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 503.4163779527559086 Td
(1 - resetZoom\(\) does not cancel or clear an in-progress zoom \(it) Tj
T* (leaves isZooming and zoomStart unchanged\) - proof: resetZoom) Tj
T* (only sets this.currentTimeRange and calls this.refreshDisplay\(\), it) Tj
T* (does not modify this.isZooming or this.zoomStart so an active) Tj
T* (drag remains active.  2 - resetZoom\(\) calls the async) Tj
T* (this.refreshDisplay\(\) without awaiting or returning the resulting) Tj
T* (Promise, leading to possible race conditions or unhandled) Tj
T* (rejections and preventing callers from knowing when the refresh) Tj
T* (completes - proof: resetZoom invokes this.refreshDisplay\(\) but) Tj
T* (neither awaits nor returns its Promise, and refreshDisplay) Tj
T* (contains awaits \(fetch\) with no internal try/catch, so errors would) Tj
T* (propagate as an unobserved rejection and callers can't await) Tj
T* (completion.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 399.0470866141732245 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 387.4277952755905403 Td
(refreshDisplay) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 399.0470866141732245 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 387.4277952755905403 Td
(zoom.js) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 399.0470866141732245 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 387.4277952755905403 Td
(ClassMethod) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 399.0470866141732245 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 387.4277952755905403 Td
(65-71) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 399.0470866141732245 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 387.4277952755905403 Td
(1 - Missing error handling: the function performs await fetch\(...\)) Tj
T* (and await response.json\(\) with no try/catch, so network or) Tj
T* (parsing errors will produce unhandled promise rejections and) Tj
T* (break functionality - proof: the code directly awaits fetch and) Tj
T* (response.json with no surrounding try/catch or .catch handlers,) Tj
T* (so any thrown/rejected promise will propagate out of) Tj
T* (refreshDisplay.2 - No HTTP status check: the code does not) Tj
T* (verify response.ok or the HTTP status before calling) Tj
T* (response.json\(\), so error responses \(4xx/5xx\) may be treated as) Tj
T* (valid data - proof: the snippet calls response.json\(\)) Tj
T* (unconditionally and never inspects response.ok or) Tj
T* (response.status.3 - No concurrency/cancellation handling: rapid) Tj
T* (successive calls to refreshDisplay can cause race conditions or) Tj
T* (stale data showing \(no AbortController, no request sequencing or) Tj
T* (version check to ignore out-of-order responses\) - proof: there is) Tj
T* (no AbortController, no token/version check, and updatePlot is) Tj
T* (called for every resolved response, allowing out-of-order) Tj
T* (responses to overwrite newer data.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 242.8085039370078277 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 231.1892125984251152 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 242.8085039370078277 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 231.1892125984251152 Td
(index.html) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 242.8085039370078277 70.8661417322834666 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 231.1892125984251152 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 242.8085039370078277 56.6929133858267775 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 231.1892125984251152 Td
(1-884) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 242.8085039370078277 212.6028346456064355 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 231.1892125984251152 Td
(1 - redrawECG computes visibleSamples = end - start but uses) Tj
T* (seg = ecgSignal.slice\(start, end + 1\) \(which has length) Tj
T* (visibleSamples + 1\) and then iterates for \(let i = 0; i <) Tj
T* (visibleSamples; i++\) with invVisible = 1/visibleSamples, so the) Tj
T* (final sample \(index end\) is never drawn and R-peak x) Tj
T* (calculations use a different denominator leading to misaligned) Tj
T* (coordinates - proven by the visibleSamples/end+1 slice and the) Tj
T* (for-loop/ invVisible usage in redrawECG.  2 - saveAnnotation) Tj
T* (hardcodes model_ectopy_label: "None" and sets) Tj
T* (model_rhythm_label from) Tj
T* (document.getElementById\("arrLabel"\).innerText, so the payload) Tj
T* (always sends a fixed ectopy value and relies on UI text for the) Tj
T* (model rhythm rather than a parsed/stored model field - proven by) Tj
T* (those exact assignments in the saveAnnotation payload.  3 -) Tj
T* (populateRhythmDropdown returns early if \(sel.options.length > 5\)) Tj
T* ({ return; }, which will prevent the dropdown from being) Tj
T* (repopulated with new serverClasses on subsequent loads and) Tj
T* (leave stale options - proven by the early-return guard at the top of) Tj
T* (populateRhythmDropdown.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 78.5199212598425476 99.2125984251968589 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 66.9006299212597924 Td
(analyze) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 78.5199212598425476 99.2125984251968589 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 66.9006299212597924 Td
(analyze_dataset.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 78.5199212598425476 70.8661417322834666 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 66.9006299212597924 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 78.5199212598425476 56.6929133858267775 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 66.9006299212597924 Td
(12-84) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 78.5199212598425476 212.6028346456064355 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 66.9006299212597924 Td
(1 - The code drops composite labels returned by normalize_label) Tj
T* (\(e.g. "Atrial Fibrillation + PVC Bigeminy"\) because it tests) Tj
T* (membership with "if lbl in CLASS_INDEX" against the joined) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 4 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
11 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 12 0 R
>>
endobj
12 0 obj
<<
/Length 14546
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -164.2885826771653228 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -164.2885826771653228 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -164.2885826771653228 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -164.2885826771653228 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(string; composite labels are not split/expanded into valid classes) Tj
T* (and are therefore excluded from training-use counts -) Tj
T* (normalize_label returns " + ".join\(...\) for "+" inputs, and analyze) Tj
T* (only keeps normalized labels that are exact keys in) Tj
T* (CLASS_INDEX, so any joined composite string will not match) Tj
T* (and is filtered out.2 - The imbalance ratio calculation uses counts) Tj
T* (= Counter\(valid\) \(which only contains observed classes\) and) Tj
T* (computes min/max over counts.values\(\), so classes with zero) Tj
T* (occurrences \(present in CLASS_NAMES/CLASS_INDEX but) Tj
T* (missing from the dataset\) are ignored - this underestimates) Tj
T* (imbalance and yields incorrect ratio - Counter\(valid\) has no) Tj
T* (entries for absent classes, therefore min\(counts.values\(\)\) cannot) Tj
T* (reflect zero-occurrence classes.3 - The DB connection is not) Tj
T* (managed in an exception-safe context \(connect\(\) used without a) Tj
T* (with-block\); conn.close\(\) is called unguarded, so an exception) Tj
T* (between connect\(\) and close\(\) can leak the connection -) Tj
T* (conn.close\(\) is executed only after the cursor block with no) Tj
T* (try/finally, so any exception before that prevents conn.close\(\)) Tj
T* (from running.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 618.212834645669318 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 606.5935433070866338 Td
(_load_model) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 618.212834645669318 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 606.5935433070866338 Td
(xai.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 618.212834645669318 70.8661417322834666 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 606.5935433070866338 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 618.212834645669318 56.6929133858267775 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 606.5935433070866338 Td
(89-159) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 618.212834645669318 212.6028346456064355 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 606.5935433070866338 Td
(1 - The function sets global _is_model_untrained = True on a) Tj
T* (load_state_dict RuntimeError but never resets) Tj
T* (_is_model_untrained to False on a subsequent successful load,) Tj
T* (causing the system to incorrectly think the model is untrained) Tj
T* (after a later successful reload. - Proof: the except branch) Tj
T* (unconditionally sets _is_model_untrained = True, and there is no) Tj
T* (assignment to False anywhere in _load_model \(or before) Tj
T* (returning on a successful load\), so once set it will persist across) Tj
T* (future reloads.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 534.4242519685039952 99.2125984251968589 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 522.804960629921311 Td
(_compute_saliency) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 534.4242519685039952 99.2125984251968589 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 522.804960629921311 Td
(xai.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 534.4242519685039952 70.8661417322834666 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 522.804960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 534.4242519685039952 56.6929133858267775 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 522.804960629921311 Td
(866-881) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 534.4242519685039952 212.6028346456064355 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 522.804960629921311 Td
(1 - The function never calls model.eval\(\) or restores) Tj
T* (model.training, so stochastic layers \(dropout/BatchNorm\) may) Tj
T* (run in train mode and produce nondeterministic/incorrect saliency) Tj
T* (maps - the code contains no model.eval\(\) or training-state) Tj
T* (handling.  2 - The function does not move or check the device of) Tj
T* (x \(it only clones/detaches/requires_grad_\), so passing a CPU) Tj
T* (tensor to a GPU model \(or vice versa\) will raise a) Tj
T* (device-mismatch at model\(x\).  3 - The function calls) Tj
T* (score.backward\(\) \(after only model.zero_grad\(\)\) and does not) Tj
T* (clear or restore model parameter gradients, so) Tj
T* (model.parameters\(\) will have .grad populated after this call and) Tj
T* (those grads persist.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 426.4856692913386382 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 414.8663779527560109 Td
(_analyze_attention) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 426.4856692913386382 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 414.8663779527560109 Td
(xai.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 426.4856692913386382 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 414.8663779527560109 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 426.4856692913386382 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 414.8663779527560109 Td
(884-948) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 426.4856692913386382 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 414.8663779527560109 Td
(1 - The function hardcodes segment duration as 10s via) Tj
T* (secs_per_step = 10.0 / T, so index->time mapping is wrong for) Tj
T* (inputs not exactly 10s long - proof: the code unconditionally) Tj
T* (computes secs_per_step = 10.0 / T with no input/metadata used. ) Tj
T* (2 - The function silently returns an empty string on missing data) Tj
T* (or any exception, masking upstream errors - proof: it returns "") Tj
T* (immediately if _last_attention is None and also returns "" in the) Tj
T* (except block after printing the error.  3 - Threshold logic is) Tj
T* (inconsistent and hardcoded \(comment says >0.8 but code uses) Tj
T* (>0.7 then >0.5\), leading to arbitrary peak detection behavior -) Tj
T* (proof: the comment "# Threshold: Find peaks > 0.8" is followed) Tj
T* (by peaks = np.where\(attn_1d > 0.7\)[0] and then a fallback to) Tj
T* (>0.5.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 310.4970866141733268 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 298.8777952755906426 Td
(explain_segment) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 310.4970866141733268 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 298.8777952755906426 Td
(xai.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 310.4970866141733268 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 298.8777952755906426 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 310.4970866141733268 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 298.8777952755906426 Td
(955-1066) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 310.4970866141733268 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 298.8777952755906426 Td
(1 - Saliency and attention are computed even when a clinical rule) Tj
T* (OVERRIDES the model, so saliency/attention can reflect the) Tj
T* (original model class \(pred_idx\) while pred_label/final_probs) Tj
T* (reflect the rule - proof: the code calls saliency =) Tj
T* (_compute_saliency\(model, x, pred_idx\) and attention_context =) Tj
T* (_analyze_attention\(model\) \(which use the model/pred_idx\) after) Tj
T* (computing pred_idx but after/independent of the override decision) Tj
T* (that sets final_prediction and final_probs.  2 - When) Tj
T* (_is_model_untrained is True and no rule overrides, the function) Tj
T* (still computes and returns model-based saliency and attention) Tj
T* (even though it replaces predictions and clears probabilities,) Tj
T* (producing misleading XAI outputs - proof: saliency and attention) Tj
T* (are computed before the if _is_model_untrained check that then) Tj
T* (replaces pred_label and final_probs with retraining notices.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 186.4585039370080324 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 174.8392125984253198 Td
(predict_and_explain) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 186.4585039370080324 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 174.8392125984253198 Td
(xai.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 186.4585039370080324 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 174.8392125984253198 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 186.4585039370080324 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 174.8392125984253198 Td
(1073-1130) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 186.4585039370080324 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 174.8392125984253198 Td
(1 - The exception return dict is missing the "cnn_featuremap" and) Tj
T* ("transformer_attention" keys that the normal return \(and the) Tj
T* (docstring\) promise. - Proof: the except block returns {"error":...,) Tj
T* ("pred_label":"Unknown", "probabilities":[], "saliency":[]} and does) Tj
T* (not include "cnn_featuremap" or "transformer_attention".2 - The) Tj
T* (function converts "probabilities" to a list but does not ensure) Tj
T* ("saliency" is JSON-serializable \(no .tolist\(\) or explicit conversion\),) Tj
T* (leading to inconsistent/possibly non-serializable return types. -) Tj
T* (Proof: saliency is assigned via saliency = _compute_saliency\(...\)) Tj
T* (and returned directly, whereas probs is explicitly converted with) Tj
T* (probs.tolist\(\), so saliency's type is not normalized.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 86.5699212598427721 99.2125984251968589 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 74.9506299212600879 Td
(remove_baseline_wander) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 86.5699212598427721 99.2125984251968589 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 74.9506299212600879 Td
(cleaning.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 86.5699212598427721 70.8661417322834666 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 74.9506299212600879 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 86.5699212598427721 56.6929133858267775 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 74.9506299212600879 Td
(21-36) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 86.5699212598427721 212.6028346456064355 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 74.9506299212600879 Td
(1 - The function does not validate that cutoff/normal_cutoff is) Tj
T* (within \(0, 1\) \(i.e., cutoff < nyquist\); if config or fs produce) Tj
T* (normal_cutoff <=0 or >=1, scipy.signal.butter will raise an error. -) Tj
T* (proof: normal_cutoff = cutoff / \(0.5 * fs\) is computed with no) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 5 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
13 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 14 0 R
>>
endobj
14 0 obj
<<
/Length 13553
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(checks and scipy.signal.butter requires 0 < Wn < 1 and will raise) Tj
T* (ValueError if outside that range.2 - The function does not check) Tj
T* (signal length relative to filtfilt padlen \(3*max\(len\(a\), len\(b\)\)\); filtfilt) Tj
T* (will raise an error for short signals, so short inputs can fail) Tj
T* (unexpectedly. - proof: the code calls filtfilt\(b, a, signal\)) Tj
T* (unconditionally and scipy.signal.filtfilt raises ValueError when) Tj
T* (signal length <= padlen \(3*max\(len\(a\), len\(b\)\)\).3 -) Tj
T* (Unknown/unsupported cfg['method'] is silently ignored and the) Tj
T* (original signal is returned without warning or error, which can hide) Tj
T* (misconfiguration and lead callers to assume baseline removal) Tj
T* (occurred when it did not. - proof: if cfg['method'] !=) Tj
T* ('butterworth_highpass' the function simply returns the input signal) Tj
T* (with no logging or exception.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 666.5128346456692725 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 654.8935433070865884 Td
(load_config) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 666.5128346456692725 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 654.8935433070865884 Td
(artifact_detection.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 666.5128346456692725 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 654.8935433070865884 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 666.5128346456692725 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 654.8935433070865884 Td
(9-20) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 666.5128346456692725 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 654.8935433070865884 Td
(1 - The function returns the raw result of yaml.safe_load without) Tj
T* (validating or merging with fallback defaults; if the YAML exists but) Tj
T* (lacks the expected 'artifacts' keys \(or keys within them\), callers) Tj
T* (that access _CONFIG['artifacts'][...] will fail. - If) Tj
T* (CONFIG_PATH.exists\(\) is True and the file's YAML omits) Tj
T* ('artifacts' or nested keys, yaml.safe_load\(...\) is returned) Tj
T* (unchanged, so accesses like) Tj
T* (_CONFIG['artifacts']['flatline_threshold'] will raise) Tj
T* (KeyError/TypeError.2 - The function does not handle YAML) Tj
T* (parsing or file I/O errors \(e.g., malformed YAML\), so) Tj
T* (opening/parsing the config can raise exceptions and crash) Tj
T* (instead of falling back to safe defaults or surfacing a controlled) Tj
T* (error. - There is no try/except around open\(\) or yaml.safe_load\(\),) Tj
T* (so OSError from file I/O or yaml.YAMLError from malformed) Tj
T* (YAML will propagate as exceptions.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 534.4242519685039952 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 522.804960629921311 Td
(check_signal_quality) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 534.4242519685039952 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 522.804960629921311 Td
(artifact_detection.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 534.4242519685039952 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 522.804960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 534.4242519685039952 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 522.804960629921311 Td
(24-105) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 534.4242519685039952 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 522.804960629921311 Td
(1 - Docstring claims "sqi_score": float # 0.0 to 1.0, but the) Tj
T* (function returns the raw calculate_sqi_score value \(0-100\) and) Tj
T* (does not normalize it to 0-1 - Proof: the docstring annotates) Tj
T* (sqi_score as 0.0-1.0 while the code sets numeric_sqi =) Tj
T* (calculate_sqi_score\(signal, fs\) \(and calculate_sqi_score's) Tj
T* (docstring and implementation use a 0.0-100.0 scale\) with no) Tj
T* (normalization applied.  2 - The function's logic and thresholds) Tj
T* (\(e.g., comparing numeric_sqi to 40.0 and 25.0 and capping to) Tj
T* (40.0 when artifacts exist\) operate on a 0-100 scale while the) Tj
T* (docstring and return type suggest a 0-1 scale, causing) Tj
T* (inconsistent semantics - Proof: the code uses comparisons) Tj
T* (numeric_sqi > 40.0, numeric_sqi < 25.0 and sets numeric_sqi =) Tj
T* (40.0, which are incompatible with a 0.0-1.0 interpretation stated) Tj
T* (in the docstring.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 410.3856692913385587 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 398.7663779527558745 Td
(compute_metrics) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 410.3856692913385587 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 398.7663779527558745 Td
(utils.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 410.3856692913385587 70.8661417322834666 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 398.7663779527558745 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 410.3856692913385587 56.6929133858267775 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 398.7663779527558745 Td
(14-18) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 410.3856692913385587 212.6028346456064355 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 398.7663779527558745 Td
(1 - The function does not validate that y_true and y_pred have) Tj
T* (the same length; passing mismatched-length inputs will raise) Tj
T* (exceptions \(accuracy_score/f1_score\) rather than being handled) Tj
T* (gracefully. - Proof: the code only checks len\(y_true\)>0 and then) Tj
T* (calls accuracy_score\(y_true, y_pred\) / f1_score without verifying) Tj
T* (len\(y_pred\)==len\(y_true\), so sklearn will raise a ValueError on) Tj
T* (mismatched lengths.2 - confusion_matrix is forced to use) Tj
T* (labels=list\(range\(len\(CLASS_NAMES\)\)\). If y_true/y_pred contain) Tj
T* (labels outside that range or a different label set, those labels will) Tj
T* (be ignored or misrepresented, producing an incorrect confusion) Tj
T* (matrix. - Proof: the code calls confusion_matrix\(y_true, y_pred,) Tj
T* (labels=list\(range\(len\(CLASS_NAMES\)\)\)\) which restricts the) Tj
T* (matrix to those integer labels and will not account correctly for) Tj
T* (any other label values/types in the inputs.3 - Inconsistent) Tj
T* (handling of empty inputs: accuracy and macro_f1 are set to 0.0) Tj
T* (when y_true is empty, but the confusion matrix is still computed) Tj
T* (\(and returned\) unconditionally, which is inconsistent and can be) Tj
T* (misleading. - Proof: the code conditionally sets acc/macro_f1) Tj
T* (when len\(y_true\)>0 else 0.0, but always executes) Tj
T* (confusion_matrix\(...\) afterwards, so an empty y_true yields 0.0) Tj
T* (metrics but still returns a \(zero\) confusion matrix.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 229.9970866141732415 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 218.3777952755906426 Td
(save_plot_prediction) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 229.9970866141732415 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 218.3777952755906426 Td
(utils.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 229.9970866141732415 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 218.3777952755906426 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 229.9970866141732415 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 218.3777952755906426 Td
(20-29) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 229.9970866141732415 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 218.3777952755906426 Td
(1 - The function assumes indices from probs map directly into the) Tj
T* (global CLASS_NAMES list without validating lengths; if) Tj
T* (len\(probs\) > len\(CLASS_NAMES\) this will raise an IndexError) Tj
T* (when accessing CLASS_NAMES[i]. - proof: topk uses indices) Tj
T* (from probs and the list comprehension does CLASS_NAMES[i]) Tj
T* (with no bounds check, so any i >= len\(CLASS_NAMES\) will raise) Tj
T* (IndexError \(e.g., probs length 20 vs CLASS_NAMES length 13\).2) Tj
T* (- The function formats probability values with f"{p:.2f}" but does) Tj
T* (not ensure p is a plain Python float/NumPy scalar; passing) Tj
T* (PyTorch tensors or other non-scalar types will raise a TypeError) Tj
T* (\(no conversion like .item\(\) is performed\). - proof: the code uses) Tj
T* (f"{p:.2f}" without converting p, and objects like torch.Tensor do not) Tj
T* (support the 'f' format specifier and will raise a TypeError when) Tj
T* (formatted.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 105.9585039370078619 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 94.3392125984252061 Td
(_load_data_from_json) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 105.9585039370078619 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 94.3392125984252061 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 105.9585039370078619 70.8661417322834666 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 94.3392125984252061 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 105.9585039370078619 56.6929133858267775 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 94.3392125984252061 Td
(40-80) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 105.9585039370078619 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 94.3392125984252061 Td
(1 - The function does not check for an empty signal array: if the) Tj
T* (JSON contains an empty list for the channel, np.max/np.min will) Tj
T* (raise an exception \(and downstream processing will fail\). - proof:) Tj
T* (The code only tests signal is None, then calls) Tj
T* (np.max\(np.abs\(signal\)\) with no empty-array check, and np.max) Tj
T* (on an empty numpy array raises a ValueError \("zero-size array to) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 6 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
15 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 16 0 R
>>
endobj
16 0 obj
<<
/Length 14692
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(reduction operation maximum"\).2 - The normalization step can) Tj
T* (divide by zero when the signal is constant \(np.max\(signal\) ==) Tj
T* (np.min\(signal\)\), producing NaN/Inf values that will propagate to) Tj
T* (downstream functions; there is no guard against this. - proof: The) Tj
T* (code performs \(signal - np.min\(signal\)\) / \(np.max\(signal\) -) Tj
T* (np.min\(signal\)\) when the threshold passes but does not check if) Tj
T* (the denominator is zero.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 714.8128346456693407 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 703.1935433070866566 Td
(_preprocess) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 714.8128346456693407 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 703.1935433070866566 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 714.8128346456693407 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 703.1935433070866566 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 714.8128346456693407 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 703.1935433070866566 Td
(83-109) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 714.8128346456693407 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 703.1935433070866566 Td
(1 - The function does not validate that self.target_fs is sufficiently) Tj
T* (high for the hard-coded filter cutoffs \(0.5, 40, 50±1, 60±1 Hz\). -) Tj
T* (Proof: nyquist = 0.5*self.target_fs and the 60 Hz bandstop uses) Tj
T* (\(60+1\)/nyquist = 122/self.target_fs so for self.target_fs <= 122 the) Tj
T* (normalized cutoff >= 1 and scipy.signal.butter will raise a) Tj
T* (ValueError, yet no check/adaptation is performed in the code.2 -) Tj
T* (The function does not guard against very short input signals) Tj
T* (relative to filtfilt's padding requirements. - Proof: the code applies) Tj
T* (filtfilt with order-3 filters \(len\(b\)=4\) so padlen = 3*\(4-1\)=9 and filtfilt) Tj
T* (requires len\(signal\) > padlen, but no length check or fallback is) Tj
T* (implemented before calling filtfilt.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 614.9242519685039952 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 603.304960629921311 Td
(_r_peak_detection) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 614.9242519685039952 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 603.304960629921311 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 614.9242519685039952 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 603.304960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 614.9242519685039952 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 603.304960629921311 Td
(111-133) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 614.9242519685039952 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 603.304960629921311 Td
(1 - The refinement picks np.argmax\(signal[start:end]\) on the) Tj
T* (signed waveform so inverted \(negative\) R-peaks will not be found) Tj
T* (correctly \(it should consider magnitude or polarity\) - proof: the) Tj
T* (code literally calls np.argmax on the raw segment \(no abs or) Tj
T* (argmin\), so negative R-peaks would yield the wrong index.  2 -) Tj
T* (Peak indices are computed on integrated_signal derived from) Tj
T* (np.diff\(signal\) \(length N-1\) but then used directly to index the) Tj
T* (original signal \(length N\), creating an index/alignment mismatch) Tj
T* (\(off-by-one risk\) - proof: squared_signal = np.diff\(signal\) ->) Tj
T* (len\(squared_signal\)=len\(signal\)-1 and integrated_signal is) Tj
T* (convolved from that, yet find_peaks indices are applied directly) Tj
T* (into signal.  3 - No deduplication or refractory enforcement is) Tj
T* (applied to refined_r_peaks before returning, so duplicates or) Tj
T* (very-close indices can occur and produce zero RR intervals) Tj
T* (downstream - proof: refined_r_peaks is appended to and) Tj
T* (returned as-is with no unique/sorting/min-distance checks.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 474.7856692913385928 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 463.1663779527559086 Td
(_calculate_nonlinear_hrv) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 474.7856692913385928 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 463.1663779527559086 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 474.7856692913385928 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 463.1663779527559086 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 474.7856692913385928 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 463.1663779527559086 Td
(183-212) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 474.7856692913385928 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 463.1663779527559086 Td
(1 - The >=20-beat guard makes the function return defaults for 5s) Tj
T* (segments: with SEGMENT_DURATION_S = 5.0 you would need) Tj
T* (21 R-peaks in a segment to produce 20 RR intervals \(21 beats /) Tj
T* (5s = 252 bpm\) which is physiologically implausible, so typical) Tj
T* (segments will always hit the early return. - Proof:) Tj
T* (SEGMENT_DURATION_S is 5.0 \(global\) and RR_intervals =) Tj
T* (beats - 1, so reaching 20 RR intervals requires 21 beats in 5s ) Tj
T* (252 bpm, outside normal ranges.  2 - The inner try/except) Tj
T* (ImportError around "from biosppy.signals.hrv import) Tj
T* (sample_entropy" is redundant/unreachable because) Tj
T* (sample_entropy is already imported at module top. - Proof: the) Tj
T* (file-level globals include "from biosppy.signals.hrv import) Tj
T* (sample_entropy", so the inner import cannot raise ImportError in) Tj
T* (a successfully loaded module.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 350.7470866141733268 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 339.1277952755906426 Td
(_sanitize_features) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 350.7470866141733268 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 339.1277952755906426 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 350.7470866141733268 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 339.1277952755906426 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 350.7470866141733268 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 339.1277952755906426 Td
(240-260) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 350.7470866141733268 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 339.1277952755906426 Td
(1 - Does not recursively sanitize nested structures \(lists, dicts,) Tj
T* (nested dicts\): NaN/Inf values inside lists or sub-dictionaries are) Tj
T* (left unchanged, so the function does not guarantee that the entire) Tj
T* (feature payload is JSON-serializable. - proof: the code iterates) Tj
T* (only top-level items and only handles float/np.floating, assigning) Tj
T* (all other values unchanged and never recursing into nested) Tj
T* (lists/dicts.2 - Does not convert numpy integer or boolean scalar) Tj
T* (types \(np.integer, np.bool_\) to native Python types: only) Tj
T* (np.floating is handled, so numpy integer/bool scalars can cause) Tj
T* (json.dumps to raise TypeError. - proof: the function checks) Tj
T* (isinstance\(value, float\) and isinstance\(value, np.floating\) but has) Tj
T* (no branch for np.integer or np.bool_, leaving those numpy scalars) Tj
T* (unconverted.3 - Leaves numpy arrays \(np.ndarray\) unchanged) Tj
T* (\(and does not replace NaN/Inf inside them\): JSON cannot) Tj
T* (serialize numpy arrays directly and arrays may contain NaN/Inf,) Tj
T* (so the function can fail to ensure JSONB compatibility. - proof:) Tj
T* (np.ndarray values fall into the else branch and are copied as-is) Tj
T* (without conversion or NaN/Inf checks.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 194.5085039370079301 99.2125984251968589 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 182.8892125984252743 Td
(_extract_segment_features) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 194.5085039370079301 99.2125984251968589 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 182.8892125984252743 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 194.5085039370079301 70.8661417322834666 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 182.8892125984252743 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 194.5085039370079301 56.6929133858267775 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 182.8892125984252743 Td
(263-311) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 194.5085039370079301 212.6028346456064355 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 182.8892125984252743 Td
(1 - The function computes RMSSD as) Tj
T* (np.sqrt\(np.mean\(np.diff\(rr_intervals_ms\)**2\)\) while only checking) Tj
T* (len\(rr_intervals_ms\) > 0, so when rr_intervals_ms has length 1) Tj
T* (np.diff\(...\) is empty, np.mean\(empty\) yields NaN and RMSSD) Tj
T* (becomes NaN \(with a runtime warning\).) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 142.9199212598425675 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 131.3006299212598833 Td
(process_and_save_record) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 142.9199212598425675 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 131.3006299212598833 Td
(ecgprocessor.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 142.9199212598425675 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 131.3006299212598833 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 142.9199212598425675 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 131.3006299212598833 Td
(336-407) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 142.9199212598425675 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 131.3006299212598833 Td
(1 - segments_processed is incremented for every successful) Tj
T* (cur.execute call regardless of whether the INSERT actually) Tj
T* (inserted/updated a row \(ON CONFLICT ... DO NOTHING can) Tj
T* (result in no row change\). The printed "Successfully) Tj
T* (inserted/updated {segments_processed}" is therefore misleading) Tj
T* (and does not reflect actual rows inserted/updated. - Proof: the) Tj
T* (code does segments_processed += 1 immediately after) Tj
T* (cur.execute\(...\) with ON CONFLICT DO NOTHING, and there is) Tj
T* (no check of cur.rowcount, so conflict-suppressed non-inserts are) Tj
T* (still counted.2 - The database connection \(conn\) is not) Tj
T* (guaranteed to be closed on unexpected exceptions raised inside) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 7 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
17 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 18 0 R
>>
endobj
18 0 obj
<<
/Length 14697
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -124.038582677165337 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -124.038582677165337 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -124.038582677165337 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -124.038582677165337 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(the with conn.cursor\(\) block \(there is no finally/try/finally around) Tj
T* (conn.close\). An unhandled exception will bypass the) Tj
T* (conn.commit\(\) and conn.close\(\), potentially leaking DB) Tj
T* (connections. - Proof: conn.close\(\) is only called after the) Tj
T* (with-block and commit; any exception escaping the with-block will) Tj
T* (skip those lines and there is no finally to ensure close\(\).3 -) Tj
T* (_sanitize_features does not convert non-float numpy scalar types) Tj
T* (\(e.g., np.int64\) or other non-serializable numpy objects into native) Tj
T* (Python types; such values would be left as-is and can cause) Tj
T* (json.dumps\(sanitized_features\) to raise a TypeError during) Tj
T* (insertion. - Proof: _sanitize_features only handles float and) Tj
T* (np.floating specifically and otherwise leaves values unchanged,) Tj
T* (so a np.int64 remains a numpy scalar which json.dumps cannot) Tj
T* (serialize.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 658.462834645669318 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 646.8435433070866338 Td
(main) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 658.462834645669318 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 646.8435433070866338 Td
(export_sql_segments_to_jso) Tj
T* (n.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 658.462834645669318 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 646.8435433070866338 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 658.462834645669318 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 646.8435433070866338 Td
(54-94) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 658.462834645669318 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 646.8435433070866338 Td
(1 - The function writes JSON files to EXPORT_DIR without) Tj
T* (ensuring the directory exists \(EXPORT_DIR is defined but not) Tj
T* (created\), which will raise FileNotFoundError if the directory is) Tj
T* (missing. - EXPORT_DIR is set to Path\("retraining_data"\) and the) Tj
T* (code never calls mkdir; Path.write_text does not create parent) Tj
T* (directories and will raise FileNotFoundError if that directory is) Tj
T* (absent.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 590.7742519685039042 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 579.1549606299213337 Td
(get_segment_list) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 590.7742519685039042 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 579.1549606299213337 Td
(db_service.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 590.7742519685039042 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 579.1549606299213337 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 590.7742519685039042 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 579.1549606299213337 Td
(23-52) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 590.7742519685039042 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 579.1549606299213337 Td
(1 - The function uses a bare except: which swallows all) Tj
T* (exceptions and returns an empty list, masking database errors) Tj
T* (and making callers unable to distinguish "no data" from an error) Tj
T* (condition. - Proof: the code contains "except:" with no exception) Tj
T* (type and immediately "return []", so any exception \(including DB) Tj
T* (errors\) is caught and converted to an empty list.2 - The function) Tj
T* (does not log or re-raise exceptions on failure \(combined with the) Tj
T* (bare except\), so failures are silently ignored and) Tj
T* (debugging/monitoring of DB issues is impossible. - Proof: the) Tj
T* (except block only returns [] and contains no logging calls or) Tj
T* ("raise", so no error information is recorded or propagated.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 490.8856692913385587 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 479.2663779527559313 Td
(update_annotation) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 490.8856692913385587 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 479.2663779527559313 Td
(db_service.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 490.8856692913385587 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 479.2663779527559313 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 490.8856692913385587 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 479.2663779527559313 Td
(123-251) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 490.8856692913385587 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 479.2663779527559313 Td
(1 - used_for_training is unconditionally set to FALSE in the) Tj
T* (UPDATE, so no records will ever be marked for retraining despite) Tj
T* (the function claiming to "classify the mistake for retraining" -) Tj
T* (Proof: the SQL literal contains "used_for_training = FALSE" with) Tj
T* (no conditional logic, so every update always resets that column) Tj
T* (to False.2 - The function contains duplicated conn.commit\(\) and) Tj
T* (return cur.rowcount > 0 lines \(second block unreachable\),) Tj
T* (indicating a logic/flow bug - Proof: immediately after cur.execute) Tj
T* (the code does "conn.commit\(\); return cur.rowcount > 0" and then) Tj
T* (has another "conn.commit\(\); return cur.rowcount > 0" which is) Tj
T* (unreachable due to the prior return.3 - model_rhythm_label and) Tj
T* (model_ectopy_label default to None in the signature but the) Tj
T* (function raises ValueError if they are None - a signature/behavior) Tj
T* (mismatch that can mislead callers - Proof: the signature sets) Tj
T* (model_rhythm_label=None and model_ectopy_label=None but) Tj
T* (the code immediately checks "if model_rhythm_label is None or) Tj
T* (model_ectopy_label is None: raise ValueError\(...\)", causing) Tj
T* (omitted args to raise.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 334.6470866141731904 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 323.0277952755905062 Td
(save_model_prediction) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 334.6470866141731904 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 323.0277952755905062 Td
(db_service.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 334.6470866141731904 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 323.0277952755905062 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 334.6470866141731904 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 323.0277952755905062 Td
(256-276) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 334.6470866141731904 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 323.0277952755905062 Td
(1 - The function unconditionally returns True even when an) Tj
T* (exception occurs, so callers \(including model training/retraining) Tj
T* (logic\) cannot determine whether the database update actually) Tj
T* (succeeded. - proof: the function ends with "return True" after the) Tj
T* (try/except/finally and the except block neither changes the return) Tj
T* (value nor re-raises, so an exception path still returns True.2 -) Tj
T* (Exceptions are swallowed and only printed \(no error propagation) Tj
T* (or clear error signaling and no explicit rollback\), causing silent) Tj
T* (failures and preventing upstream logic from handling update) Tj
T* (errors properly. - proof: the except block only does print\("DB) Tj
T* (ERROR save_model_prediction:", e\) and does not re-raise the) Tj
T* (exception or call conn.rollback\(\), so errors are neither propagated) Tj
T* (nor rolled back.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 218.6585039370077936 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 207.0392125984251379 Td
(get_min_segment_id_with_s) Tj
T* (ignal) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 218.6585039370077936 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 207.0392125984251379 Td
(db_service.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 218.6585039370077936 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 207.0392125984251379 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 218.6585039370077936 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 207.0392125984251379 Td
(280-300) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 218.6585039370077936 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 207.0392125984251379 Td
(1 - The function catches all exceptions, prints an error, and) Tj
T* (returns 0, thereby conflating "no matching segment" with) Tj
T* ("database error"; this can silently break downstream/model) Tj
T* (training logic that expects a distinct failure vs. empty-result signal.) Tj
T* (- Proof: The code returns 0 both when no row/value is found) Tj
T* (\(return ... else 0\) and in the except block \(except ... return 0\), so) Tj
T* (an error and an empty result are indistinguishable.  2 - Error) Tj
T* (reporting uses print\(...\) instead of proper structured logging or) Tj
T* (raising, which harms observability and makes it hard for calling) Tj
T* (code to react appropriately. - Proof: The except block calls) Tj
T* (print\("DB ERROR get_min_segment_id_with_signal:", e\) and) Tj
T* (does not log or re-raise the exception, so callers cannot catch the) Tj
T* (original error and the message only goes to stdout.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 102.6699212598424111 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 91.0506299212596559 Td
(get_first_segment_id_by_file) Tj
T* (name) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 102.6699212598424111 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 91.0506299212596559 Td
(db_service.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 102.6699212598424111 70.8661417322834666 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 91.0506299212596559 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 102.6699212598424111 56.6929133858267775 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 91.0506299212596559 Td
(322-345) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 102.6699212598424111 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 91.0506299212596559 Td
(1 - The function swallows all exceptions and returns 0 on error,) Tj
T* (which hides database failures and prevents callers from) Tj
T* (distinguishing between a genuine segment_id of 0 and an) Tj
T* (operational error. - Proof: the except block does "print\(...\)" then) Tj
T* ("return 0", so any Exception yields 0.2 - Error reporting uses) Tj
T* (print\(...\) instead of a proper logging mechanism, which is) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 8 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
19 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 20 0 R
>>
endobj
20 0 obj
<<
/Length 14651
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -83.7885826771653512 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -83.7885826771653512 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -83.7885826771653512 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -83.7885826771653512 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(inappropriate for reliable production diagnostics and monitoring. -) Tj
T* (Proof: the error path calls print\("DB ERROR) Tj
T* (get_first_segment_id_by_filename:", e\) rather than using the) Tj
T* (logging module.3 - The function conflates "no matching row" and) Tj
T* ("error occurred" by returning 0 in both cases; it should return a) Tj
T* (distinct sentinel \(e.g., None\) or raise an exception so callers can) Tj
T* (differentiate the cases. - Proof: on no row it does "return row[0] if) Tj
T* (row else 0", and on exception it also "return 0", so both cases) Tj
T* (produce 0.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 698.7128346456692043 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 687.0935433070866338 Td
(clean_json) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 698.7128346456692043 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 687.0935433070866338 Td
(import_to_sql.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 698.7128346456692043 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 687.0935433070866338 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 698.7128346456692043 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 687.0935433070866338 Td
(44-57) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 698.7128346456692043 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 687.0935433070866338 Td
(1 - The function only checks isinstance\(obj, float\) and thus does) Tj
T* (not handle NumPy scalar types \(e.g., np.float64, np.int64\).) Tj
T* (NumPy NaN/inf scalars will not be detected/converted to None) Tj
T* (and numeric NumPy scalars won't be converted to native Python) Tj
T* (types, causing potential JSON serialization or downstream errors.) Tj
T* (- Proof: isinstance\(np.float64\(np.nan\), float\) is False so a) Tj
T* (np.float64 NaN bypasses the float branch and remains) Tj
T* (unconverted.2 - The function does not handle numpy.ndarray \(or) Tj
T* (other sequence types like tuples\). NumPy arrays containing) Tj
T* (NaN/inf will be returned unmodified \(and not converted to lists\),) Tj
T* (so recursive cleaning and JSON-compatibility for array data are) Tj
T* (not guaranteed. - Proof: isinstance\(np.array\([np.nan]\), list\) is) Tj
T* (False so a numpy.ndarray hits the final return and is not) Tj
T* (recursively cleaned or converted.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 574.6742519685039952 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 563.054960629921311 Td
(compute_pr_interval) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 574.6742519685039952 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 563.054960629921311 Td
(import_to_sql.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 574.6742519685039952 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 563.054960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 574.6742519685039952 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 563.054960629921311 Td
(121-138) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 574.6742519685039952 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 563.054960629921311 Td
(1 - The function broadly catches all exceptions \(bare "except) Tj
T* (Exception"\) and silently returns None, which hides errors and) Tj
T* (failures in ECG delineation or data issues; this prevents proper) Tj
T* (error propagation, logging, and makes debugging or any) Tj
T* (downstream model training/retraining logic fragile. - Proof: the) Tj
T* (function ends with "except Exception: return None", so any) Tj
T* (exception is swallowed and no logging or re-raising occurs.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 506.9856692913386382 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 495.3663779527559541 Td
(fetch_annotated_segments) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 506.9856692913386382 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 495.3663779527559541 Td
(db_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 506.9856692913386382 70.8661417322834666 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 495.3663779527559541 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 506.9856692913386382 56.6929133858267775 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 495.3663779527559541 Td
(10-67) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 506.9856692913386382 212.6028346456064355 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 495.3663779527559541 Td
(1 - r_peaks normalization is inconsistent: when r_peaks is a) Tj
T* (string the code converts elements to int, but when it's a list/tuple) Tj
T* (it simply does list\(r_peaks\) without ensuring elements are ints.) Tj
T* (This produces inconsistent element types in) Tj
T* ("r_peaks_in_segment" and can break downstream/model training) Tj
T* (code that expects integers. - Proof: the code uses "rp = [int\(x\) for) Tj
T* (x in r_peaks.split\(','\) ...]" for string input but "elif) Tj
T* (isinstance\(r_peaks, \(list, tuple\)\): rp = list\(r_peaks\)" for list/tuple,) Tj
T* (so no int cast is applied in the latter branch.2 - The function uses) Tj
T* (bare except: clauses \(in JSON loading and r_peaks parsing\)) Tj
T* (which silently swallow all exceptions and make debugging and) Tj
T* (error propagation impossible. - Proof: both "except:" blocks after) Tj
T* (json.loads and the r_peaks int conversion catch all exceptions) Tj
T* (with no logging or re-raise, so errors are silently ignored.3 - The) Tj
T* (SELECT query has no ORDER BY, so results \(and any limit) Tj
T* (applied\) are nondeterministic across calls. That can harm) Tj
T* (reproducibility and any model training/retraining logic that relies) Tj
T* (on a stable data ordering. - Proof: the query string only selects) Tj
T* (from ecg_features_annotatable and conditionally appends ") Tj
T* (LIMIT ...", but contains no "ORDER BY" clause, so SQL does not) Tj
T* (guarantee row order.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 326.5970866141732927 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 314.9777952755905517 Td
(save_to_db) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 326.5970866141732927 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 314.9777952755905517 Td
(synthesize_arrhythmias.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 326.5970866141732927 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 314.9777952755905517 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 326.5970866141732927 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 314.9777952755905517 Td
(307-342) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 326.5970866141732927 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 314.9777952755905517 Td
(1 - Uses hardcoded sampling rate \(360\) and duration \(10.0\) in the) Tj
T* (INSERT instead of using the global FS and DURATION) Tj
T* (constants, breaking consistency/synergy with module-level) Tj
T* (settings. - Proof: the VALUES tuple passed to cur.execute) Tj
T* (contains the literal 10.0 and 360 while the module defines) Tj
T* (FS=360 and DURATION=10 which are not used.2 - Does not) Tj
T* (ensure cursor/connection are closed on exceptions \(no finally or) Tj
T* (context manager\), so DB resources may leak if an error occurs. -) Tj
T* (Proof: conn and cur are created inside the try but the except only) Tj
T* (prints the error and never calls cur.close\(\) or conn.close\(\), so an) Tj
T* (early exception can leave them open.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 226.7085039370079471 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 215.0892125984253198 Td
(get_output_gain) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 226.7085039370079471 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 215.0892125984253198 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 226.7085039370079471 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 215.0892125984253198 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 226.7085039370079471 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 215.0892125984253198 Td
(86-94) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 226.7085039370079471 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 215.0892125984253198 Td
(1 - Inconsistent interpretation of target_mv between modes:) Tj
T* (get_output_gain\(\) returns np.clip\(self.target_mv / 5.0, ...\) when) Tj
T* (self.is_calibrated is False, but audio_callback uses gain =) Tj
T* (self.target_mv directly in Calibration mode, so the same slider) Tj
T* (value is interpreted differently depending on code path. - Proof:) Tj
T* (get_output_gain uncalibrated branch divides by 5.0, while) Tj
T* (audio_callback's Calibration branch uses target_mv raw.2 -) Tj
T* (Misleading docstring / unit handling: the docstring claims the) Tj
T* (function computes DAC amplitude "based on target mV and) Tj
T* (calibration", yet the uncalibrated branch treats target_mv as a UI) Tj
T* (percentage \(dividing by 5\) rather than mV, so the documentation) Tj
T* (does not match the implemented behavior. - Proof: uncalibrated) Tj
T* (branch comment says "target_mv acts as raw 0-1 percentage) Tj
T* (\(scaled 0-5 for UI feel\)" and the code divides target_mv by 5.0.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 102.6699212598425817 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 91.0506299212598833 Td
(load_mit_record) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 102.6699212598425817 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 91.0506299212598833 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 102.6699212598425817 70.8661417322834666 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 91.0506299212598833 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 102.6699212598425817 56.6929133858267775 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 91.0506299212598833 Td
(96-127) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 102.6699212598425817 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 91.0506299212598833 Td
(1 - Resampling uses np.linspace\(0, original_len, target_len\)) Tj
T* (which includes original_len as an endpoint while) Tj
T* (xp=np.arange\(original_len\) ranges 0..original_len-1, so the) Tj
T* (interpolation will request x==original_len \(outside xp\) and be) Tj
T* (extrapolated instead of purely interpolated - np.linspace\(...,) Tj
T* (original_len\) yields a value beyond xp[-1]==original_len-1 as) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
226.3199999999999363 14.1732283464566535 Td
(Page 9 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
21 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 22 0 R
>>
endobj
22 0 obj
<<
/Length 14518
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -59.6385826771653527 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -59.6385826771653527 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -59.6385826771653527 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -59.6385826771653527 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(shown in the code.  2 - The function computes duration_sec =) Tj
T* (original_len / MIT_RESAMPLE_RATE instead of using the) Tj
T* (record's sampling rate \(e.g. record.fs\), so duration and target_len) Tj
T* (will be incorrect for records whose sampling frequency differs) Tj
T* (from MIT_RESAMPLE_RATE - record.fs is read by wfdb.rdrecord) Tj
T* (but never used.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 722.8628346456692952 99.2125984251968589 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 711.2435433070866111 Td
(audio_callback) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 722.8628346456692952 99.2125984251968589 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 711.2435433070866111 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 722.8628346456692952 70.8661417322834666 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 711.2435433070866111 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 722.8628346456692952 56.6929133858267775 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 711.2435433070866111 Td
(129-232) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 722.8628346456692952 212.6028346456064355 -107.9385826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 711.2435433070866111 Td
(1 - The code unpacks) Tj
T* (self.complex_gen.generate_segment\(self.waveform\) as "sig, _") Tj
T* (but generate_segment returns three values \(signal, r_peaks,) Tj
T* (metadata\), so this will raise a ValueError for too many values to) Tj
T* (unpack. - Proof: generate_segment ends with "return signal,) Tj
T* (r_peaks, metadata" yet the call is "sig, _ =) Tj
T* (self.complex_gen.generate_segment\(...\)" which expects 2) Tj
T* (values.2 - period_samples = int\(self.fs / freq\) can divide by zero if) Tj
T* (freq == 0 \(e.g., self.bpm == 0 for NSR/PVC\), causing a) Tj
T* (ZeroDivisionError before the later check for period_samples == 0.) Tj
T* (- Proof: for NSR/PVC freq = self.bpm/60.0, so bpm==0 =>) Tj
T* (freq==0 and int\(self.fs / freq\) triggers division by zero.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 614.9242519685039952 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 603.304960629921311 Td
(__init__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 614.9242519685039952 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 603.304960629921311 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 614.9242519685039952 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 603.304960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 614.9242519685039952 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 603.304960629921311 Td
(235-247) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 614.9242519685039952 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 603.304960629921311 Td
(1 - The constructor never binds the window close protocol to the) Tj
T* (on_close cleanup method, so closing the window via the window) Tj
T* (manager won't run the cleanup logic - proof: __init__ calls) Tj
T* (_setup_ui/_start_audio_stream/_start_scan_plot but there is no) Tj
T* (self.protocol\("WM_DELETE_WINDOW", self.on_close\) \(nor any) Tj
T* (protocol binding\) anywhere in the shown class while an on_close) Tj
T* (method exists.  2 - _start_audio_stream\(\) is invoked) Tj
T* (synchronously in __init__ with no error handling, so failures) Tj
T* (opening the audio device will raise during construction and crash) Tj
T* (the app before the mainloop - proof: _start_audio_stream) Tj
T* (constructs and starts sd.OutputStream without try/except and is) Tj
T* (called directly in __init__, so any exception will propagate out of) Tj
T* (the constructor.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 498.9356692913386269 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 487.3163779527559427 Td
(update_bpm_slider) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 498.9356692913386269 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 487.3163779527559427 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 498.9356692913386269 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 487.3163779527559427 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 498.9356692913386269 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 487.3163779527559427 Td
(367-377) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 498.9356692913386269 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 487.3163779527559427 Td
(1 - The local variable "freq" is computed \(freq = value / 60.0\) but) Tj
T* (never used - dead/unnecessary code inside the function. - Proof:) Tj
T* (freq is assigned and never referenced again in the function, so) Tj
T* (the value is unused.2 - The unit-labeling decision is overly) Tj
T* (narrow: it treats only engine.waveform values "NSR" and "PVC") Tj
T* (as BPM and everything else as Hz, so many cardiac waveforms) Tj
T* (from the UI \(e.g., "Sinus Bradycardia", "Sinus Tachycardia",) Tj
T* ("Atrial Fibrillation"\) will be labeled "Hz" instead of "BPM". - Proof:) Tj
T* (wave_options contains strings like "Sinus Bradycardia" and "Atrial) Tj
T* (Fibrillation" which are not in ["NSR","PVC"], therefore the else) Tj
T* (branch runs and sets the label to "Hz".) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 399.0470866141732245 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 387.4277952755905403 Td
(update_amp_slider) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 399.0470866141732245 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 387.4277952755905403 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 399.0470866141732245 70.8661417322834666 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 387.4277952755905403 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 399.0470866141732245 56.6929133858267775 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 387.4277952755905403 Td
(379-386) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 399.0470866141732245 212.6028346456064355 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 387.4277952755905403 Td
(1 - update_amp_slider does not handle the "Calibration" mode:) Tj
T* (toggle_calibration_mode sets the amp_val_label to "DAC Level) Tj
T* (\(Raw\)" and reconfigures the slider to 0-1 for calibration, but) Tj
T* (update_amp_slider only checks engine.is_calibrated and will) Tj
T* (overwrite the label \(and display percent\) when the user moves) Tj
T* (the slider during calibration. - proof: toggle_calibration_mode sets) Tj
T* (amp_slider.from_=0,to=1 and amp_val_label="DAC Level \(Raw\)") Tj
T* (while leaving engine.is_calibrated False, and update_amp_slider) Tj
T* (only branches on engine.is_calibrated so any slider movement) Tj
T* (hits the else branch and replaces the label.  2 -) Tj
T* (update_amp_slider unconditionally computes pct = \(value / 5.0\) *) Tj
T* (100 assuming the slider range is 0-5; that assumption is invalid) Tj
T* (when the slider is reconfigured to 0-1 for calibration, so the) Tj
T* (displayed percentage \(and semantics\) will be incorrect during) Tj
T* (calibration or any other mode that changes the slider range. -) Tj
T* (proof: the else branch always divides by 5.0 to compute pct) Tj
T* (regardless of the slider's actual from_/to range \(which) Tj
T* (toggle_calibration_mode sets to 0-1\), making the percent value) Tj
T* (wrong.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 234.7585039370079301 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 223.1392125984252743 Td
(change_waveform) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 234.7585039370079301 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 223.1392125984252743 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 234.7585039370079301 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 223.1392125984252743 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 234.7585039370079301 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 223.1392125984252743 Td
(397-401) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 234.7585039370079301 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 223.1392125984252743 Td
(1 - change_waveform relies on update_bpm_slider to pick BPM) Tj
T* (vs Hz but update_bpm_slider only treats self.engine.waveform in) Tj
T* (["NSR", "PVC"] as BPM while the UI waveform list contains many) Tj
T* (cardiac names like "Sinus Bradycardia" and "Atrial Fibrillation", so) Tj
T* (selecting those will make the label show "Hz" incorrectly - proof:) Tj
T* (update_bpm_slider's conditional is literally "if) Tj
T* (self.engine.waveform in ['NSR', 'PVC']" yet the option menu) Tj
T* (contains many other cardiac strings, so they will fall into the "Hz") Tj
T* (branch.  2 - change_waveform sets self.engine.complex_buffer =) Tj
T* (None without any synchronization while the audio stream is) Tj
T* (started with callback=self.engine.audio_callback \(started in) Tj
T* (_start_audio_stream\), so this unsynchronized write can race with) Tj
T* (the audio callback's reads - proof: _start_audio_stream creates) Tj
T* (sd.OutputStream\(callback=self.engine.audio_callback\) which) Tj
T* (invokes the callback on the audio thread but no locks are used) Tj
T* (around complex_buffer.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 94.6199212598426698 99.2125984251968589 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 83.0006299212599288 Td
(toggle_calibration_mode) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 94.6199212598426698 99.2125984251968589 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 83.0006299212599288 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 94.6199212598426698 70.8661417322834666 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 83.0006299212599288 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 94.6199212598426698 56.6929133858267775 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 83.0006299212599288 Td
(403-436) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 94.6199212598426698 212.6028346456064355 -51.5885826771653555 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 83.0006299212599288 Td
(1 - When entering Calibration the function sets self.engine.mode) Tj
T* (= "Calibration" but does not update the operation-mode) Tj
T* (segmented button \(self.mode_seg\). - proof: mode_seg was) Tj
T* (created with values ["Synthetic","MIT-BIH"] and) Tj
T* (toggle_calibration_mode sets self.engine.mode but never calls) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 10 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
23 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 24 0 R
>>
endobj
24 0 obj
<<
/Length 13444
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -99.8885826771653456 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -99.8885826771653456 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -99.8885826771653456 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -99.8885826771653456 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(self.mode_seg.set\(\) or otherwise updates that widget, so the) Tj
T* (segmented control's visible selection remains unchanged.2 - The) Tj
T* (function saves a measured calibration value into) Tj
T* (self.engine.calibration_gain but then ignores it: it unconditionally) Tj
T* (sets the slider and self.engine.target_mv to 1.0 on finish. - proof:) Tj
T* (the code assigns self.engine.calibration_gain =) Tj
T* (self.amp_slider.get\(\), then immediately sets) Tj
T* (self.amp_slider.set\(1.0\) and self.engine.target_mv = 1.0, and) Tj
T* (App.update_amp_slider never reads calibration_gain \(it sets) Tj
T* (engine.target_mv directly\), so the saved calibration value is not) Tj
T* (used to map slidermV in this class.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 682.6128346456692952 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 670.9935433070866111 Td
(load_mit_data) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 682.6128346456692952 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 670.9935433070866111 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 682.6128346456692952 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 670.9935433070866111 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 682.6128346456692952 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 670.9935433070866111 Td
(438-457) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 682.6128346456692952 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 670.9935433070866111 Td
(1 - The function updates Tkinter widgets from the background) Tj
T* (thread \(calls to self.mit_progress.set via update_prog, and) Tj
T* (self.mode_seg.set / self.change_mode / self.load_btn.configure) Tj
T* (inside _thread\). Tkinter is not thread-safe and all UI updates must) Tj
T* (be performed on the main thread. - Proof: update_prog calls) Tj
T* (self.mit_progress.set and is passed as progress_callback to) Tj
T* (self.engine.load_mit_record running inside the background) Tj
T* (_thread, and that same _thread directly calls self.mode_seg.set,) Tj
T* (self.change_mode and self.load_btn.configure after load, all of) Tj
T* (which mutate Tk widgets from the worker thread.2 - The) Tj
T* (background thread does not catch exceptions from) Tj
T* (self.engine.load_mit_record; if that call raises, the thread will) Tj
T* (terminate silently and the UI remains in the) Tj
T* (disabled/"Downloading..." state \(progress/button not restored\). -) Tj
T* (Proof: _thread directly calls success =) Tj
T* (self.engine.load_mit_record\(...\) with no try/except, so any) Tj
T* (exception will abort the thread before the UI is reset, leaving the) Tj
T* (button disabled and text as "Downloading...".) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 526.3742519685039269 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 514.7549606299212428 Td
(_animate_scan) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 526.3742519685039269 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 514.7549606299212428 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 526.3742519685039269 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 514.7549606299212428 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 526.3742519685039269 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 514.7549606299212428 Td
(472-509) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 526.3742519685039269 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 514.7549606299212428 Td
(1 - The function uses a bare "except Exception: pass", which) Tj
T* (silently swallows all exceptions and hides errors from queue) Tj
T* (processing and plotting \(makes debugging and correct) Tj
T* (inter-component behavior impossible\). - Proof: The try block) Tj
T* (wraps queue processing and plotting and ends with "except) Tj
T* (Exception: pass", so any Exception raised inside \(including) Tj
T* (during get_nowait\(\), set_ydata, or draw_idle\) will be ignored.2 -) Tj
T* (The loop checks "while not self.engine.plot_queue.empty\(\)" and) Tj
T* (then calls "get_nowait\(\)", which is a race condition \(queue can) Tj
T* (become empty between the empty\(\) check and get_nowait\(\)\),) Tj
T* (leading to potential Empty exceptions that are currently being) Tj
T* (silently suppressed. - Proof: The code uses empty\(\) then) Tj
T* (immediately get_nowait\(\), which can raise queue.Empty if) Tj
T* (another thread emptied the queue in between, and that exception) Tj
T* (is caught and discarded by the surrounding "except Exception:) Tj
T* (pass".) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 386.2356692913385245 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 374.6163779527558404 Td
(on_close) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 386.2356692913385245 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 374.6163779527558404 Td
(ECG_Workstation.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 386.2356692913385245 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 374.6163779527558404 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 386.2356692913385245 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 374.6163779527558404 Td
(511-528) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 386.2356692913385245 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 374.6163779527558404 Td
(1 - Calls sys.exit\(\) at the end, causing abrupt process termination) Tj
T* (which prevents a graceful shutdown and proper cleanup of) Tj
T* (background threads/resources \(instead of letting the mainloop) Tj
T* (exit cleanly\) - proof: the last line of on_close\(\) is sys.exit\(\), which) Tj
T* (raises SystemExit and will terminate the process immediately) Tj
T* (unless caught, preventing any further shutdown code from) Tj
T* (running.2 - Does not signal or shut down the SignalEngine or any) Tj
T* (of its background worker threads \(no engine shutdown/join\), so) Tj
T* (engine threads or callbacks may continue running or access) Tj
T* (destroyed GUI state - proof: on_close\(\) never calls any method) Tj
T* (on self.engine to stop or join threads; self.engine is not signaled) Tj
T* (or shut down in this function.3 - Uses a broad try/except) Tj
T* (Exception: pass when stopping/closing the audio stream, which) Tj
T* (silently swallows errors and can hide failures during shutdown -) Tj
T* (proof: the stream stop/close calls are wrapped in try: ... except) Tj
T* (Exception: pass, which suppresses any exceptions raised.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 246.0970866141732074 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 234.4777952755905517 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 246.0970866141732074 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 234.4777952755905517 Td
(README.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 246.0970866141732074 70.8661417322834666 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 234.4777952755905517 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 246.0970866141732074 56.6929133858267775 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 234.4777952755905517 Td
(1-72) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 246.0970866141732074 212.6028346456064355 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 234.4777952755905517 Td
(1 - The README does not perform or document any) Tj
T* (checks/verifications that "the code is calling each function) Tj
T* (correctly" or that functions "work synergistically"; there is no) Tj
T* (section describing call graphs, inter-module interaction, or) Tj
T* (runtime integration tests as the instruction requires. - The) Tj
T* (README only lists files and quick-start commands \(project) Tj
T* (structure and how to run components\) and contains no sections) Tj
T* (describing call graphs, inter-module interactions, or) Tj
T* (runtime/integration tests.2 - The README lacks any detailed) Tj
T* (verification of the model training and retraining logic \(no) Tj
T* (description of training loop, hyperparameters,) Tj
T* (checkpointing/reloading behavior, validation checks, or how the) Tj
T* (dashboard-triggered retraining integrates with saved models\), so) Tj
T* (it does not satisfy the requirement to check whether model) Tj
T* (training/retraining logic is proper. - Apart from a brief "Retraining") Tj
T* (note to run train_balanced.py or use the dashboard, the) Tj
T* (README provides no details on training loops, hyperparameters,) Tj
T* (checkpointing/reloading, validation, or dashboard-model) Tj
T* (integration.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 81.8085039370078277 99.2125984251968589 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 70.1892125984251152 Td
(apply_clinical_rules) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 81.8085039370078277 99.2125984251968589 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 70.1892125984251152 Td
(rhythm_orchestrator.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 81.8085039370078277 70.8661417322834666 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 70.1892125984251152 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 81.8085039370078277 56.6929133858267775 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 70.1892125984251152 Td
(9-33) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 81.8085039370078277 212.6028346456064355 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 70.1892125984251152 Td
(1 - The function defaults missing numerical features to 0 \(e.g., hr) Tj
T* (= features.get\("mean_hr", 0\)\), which can produce false positives) Tj
T* (\(e.g., missing mean_hr -> hr == 0 -> returns "Sinus Bradycardia"\)) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 11 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
25 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 26 0 R
>>
endobj
26 0 obj
<<
/Length 13587
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -115.9885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(- proof: features.get uses 0 as default so an empty dict yields) Tj
T* (hr=0 and the hr<45 branch returns "Sinus Bradycardia", 0.8, "HR) Tj
T* (< 45 bpm".  2 - Extracted features pr_interval and qrs_width are) Tj
T* (never used, indicating incomplete/incorrect rule implementation) Tj
T* (\(dead/unutilized inputs\) - proof: pr and qrs_width are assigned) Tj
T* (from features.get but are not referenced elsewhere in the) Tj
T* (function.  3 - Confidence scores and thresholds are hardcoded) Tj
T* (with no mechanism for calibration or integration with model) Tj
T* (training/retraining, so the function cannot be updated or) Tj
T* (synchronized with a learning pipeline - proof: numeric thresholds) Tj
T* (\(hr > 150, rr_cv > 0.15, hr < 45\) and confidences \(0.7, 0.8, 0.65\)) Tj
T* (are literal constants in the code with no parameters, config, or) Tj
T* (hooks for external calibration.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 666.5128346456692725 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 654.8935433070865884 Td
(decide) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 666.5128346456692725 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 654.8935433070865884 Td
(rhythm_orchestrator.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 666.5128346456692725 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 654.8935433070865884 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 666.5128346456692725 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 654.8935433070865884 Td
(39-105) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 666.5128346456692725 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 654.8935433070865884 Td
(1 - The arbitration does not implement the documented priority) Tj
T* ("Strong Rule Match -> Rule Label": rule_conf is never used as a) Tj
T* (general gate/threshold and only two specific label-based) Tj
T* (overrides are applied \(e.g., SVT override uses rule_lbl equality,) Tj
T* (not a rule_conf check\) - proof: apply_clinical_rules returns) Tj
T* (\("Supraventricular Tachycardia", 0.7, ...\) for HR>150 but the) Tj
T* (decide\(\) code overrides ML whenever rule_lbl ==) Tj
T* ("Supraventricular Tachycardia" with no check on rule_conf \(no) Tj
T* (>=0.9 or similar\).  2 - When a clinical rule override occurs, the) Tj
T* (function still returns the original ml_prediction probabilities rather) Tj
T* (than adjusted probabilities for the rule, causing inconsistent) Tj
T* (outputs - proof: the final returned dict always includes) Tj
T* ("probabilities": ml_probs which is set once from ml_prediction and) Tj
T* (never modified when rule-based overrides change final_label.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 542.4742519685039497 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 530.8549606299212655 Td
(run_validation_suite) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 542.4742519685039497 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 530.8549606299212655 Td
(automated_test.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 542.4742519685039497 70.8661417322834666 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 530.8549606299212655 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 542.4742519685039497 56.6929133858267775 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 530.8549606299212655 Td
(70-185) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 542.4742519685039497 212.6028346456064355 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 530.8549606299212655 Td
(1 - The generator sometimes returns two values for Ventricular) Tj
T* (Fibrillation but run_validation_suite always unpacks three \(sig,) Tj
T* (r_peaks, meta\), causing a ValueError when processing) Tj
T* ("Ventricular Fibrillation". - Proof: generate_segment contains "if) Tj
T* (primary_label == 'Ventricular Fibrillation': ... return signal, []" while) Tj
T* (run_validation_suite does "sig, r_peaks, meta =) Tj
T* (gen.generate_segment\(label\)".2 - Several test_classes strings do) Tj
T* (not match the exact substrings the generator checks \(e.g., test) Tj
T* (has "2nd Degree AV Block Type 1" but generator looks for "Type) Tj
T* (1 Wenckebach", "2nd Degree AV Block Type 2" vs "Type 2) Tj
T* (Mobitz II", "1st Degree AV Block" vs "1' AV Block", "3rd Degree) Tj
T* (AV Block" vs "3' AV Block"\), so those specific conditional) Tj
T* (branches will not be triggered. - Proof: run_validation_suite's list) Tj
T* (contains the shown human-readable forms while) Tj
T* (generate_segment performs substring checks like "Type 1) Tj
T* (Wenckebach", "Type 2 Mobitz II", "1' AV Block", and "3' AV Block") Tj
T* (which are not present in the test strings.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 394.2856692913385928 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 382.6663779527559086 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 394.2856692913385928 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 382.6663779527559086 Td
(IMPLEMENTATION_PLAN_) Tj
T* (REMOVE_COMPOSITES_F) Tj
T* (IXED.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 394.2856692913385928 70.8661417322834666 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 382.6663779527559086 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 394.2856692913385928 56.6929133858267775 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 382.6663779527559086 Td
(1-71) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 394.2856692913385928 212.6028346456064355 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 382.6663779527559086 Td
(1 - RETRAIN_CLASS_NAMES is built by checking the raw) Tj
T* (CLASS_NAMES for the literal " + " \(and not normalizing them) Tj
T* (first\). This contradicts the "Normalization First" rule and can miss) Tj
T* (composite names that use a different spacing/format \(e.g.,) Tj
T* ("AF+PVC"\). - Proof: The comprehension shown uses if c not in) Tj
T* (EXCLUDED_PURE_SINUS and " + " not in c with no call to) Tj
T* (normalize_label, so a CLASS_NAMES entry "AF+PVC" would not) Tj
T* (contain the literal " + " and therefore would not be filtered as) Tj
T* (intended.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 310.4970866141732699 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 298.8777952755906426 Td
(count) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 310.4970866141732699 99.2125984251968589 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 298.8777952755906426 Td
(check_counts.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 310.4970866141732699 70.8661417322834666 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 298.8777952755906426 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 310.4970866141732699 56.6929133858267775 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 298.8777952755906426 Td
(8-10) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 310.4970866141732699 212.6028346456064355 -180.3885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 298.8777952755906426 Td
(1 - SQL injection / unsafe query building: the function interpolates) Tj
T* (the raw where string into an f-string SQL statement) Tj
T* (\(cur.execute\(f"... WHERE {where}"\)\), which definitively allows) Tj
T* (injection or malformed SQL if where contains untrusted input. -) Tj
T* (Proof: the code uses cur.execute\(f"SELECT COUNT\(*\) FROM) Tj
T* (ecg_features_annotatable WHERE {where}"\) placing the raw) Tj
T* (where value directly into the SQL string without parameterization) Tj
T* (or sanitization.2 - Does not return the count value: the function) Tj
T* (only prints the count \(print\(...\)\) and returns None, which prevents) Tj
T* (callers from programmatically using the count and is not) Tj
T* (appropriate for modular or testable code. - Proof: the function) Tj
T* (body calls print\(f"{label}: {cur.fetchone\(\)[0]}"\) and contains no) Tj
T* (return statement, so it always returns None.3 - No error handling) Tj
T* (or transaction management and reliance on a global cursor: the) Tj
T* (function directly uses the module-level cur without handling) Tj
T* (exceptions, commits, or ensuring the cursor/connection state,) Tj
T* (which can lead to uncaught DB errors or inconsistent transaction) Tj
T* (state. - Proof: cur is a module-level cursor \(cur = conn.cursor\(\)\)) Tj
T* (and the function calls cur.execute\(...\) with no try/except,) Tj
T* (conn.commit\(\), or rollback, so exceptions will propagate and) Tj
T* (transactions aren't explicitly managed.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 130.108503937007896 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 118.4892125984251834 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 130.108503937007896 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 118.4892125984251834 Td
(IMPLEMENTATION_PLAN_) Tj
T* (SPLIT_MODELS_GUARDE) Tj
T* (D.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 130.108503937007896 70.8661417322834666 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 118.4892125984251834 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 130.108503937007896 56.6929133858267775 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 118.4892125984251834 Td
(1-101) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 130.108503937007896 212.6028346456064355 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 118.4892125984251834 Td
(1 - Summary and guards use the name get_rhyth_label_idx) Tj
T* (\(missing "m"\), but the code snippet defines get_rhythm_label_idx) Tj
T* (- inconsistent function naming that will break references. - Proof:) Tj
T* (The "Summary of Guards" lists `get_rhyth_label_idx`, while the) Tj
T* ("Rhythm Mapper" code block defines `def) Tj
T* (get_rhythm_label_idx\(...\)`, showing a clear name mismatch in the) Tj
T* (document.2 - The snippets and assertions reference) Tj
T* (RHYTHM_CLASS_INDEX and ECTOPY_CLASS_INDEX, but) Tj
T* (the document only defines RHYTHM_CLASS_NAMES and) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 12 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
27 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 28 0 R
>>
endobj
28 0 obj
<<
/Length 14662
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(ECTOPY_CLASS_NAMES \(no index/mapping is shown\), causing) Tj
T* (an undefined/inconsistent identifier issue. - Proof: The code) Tj
T* (returns `RHYTHM_CLASS_INDEX.get\(...\)` and uses) Tj
T* (`ECTOPY_CLASS_INDEX[...]`, yet only) Tj
T* (`RHYTHM_CLASS_NAMES = [...]` and) Tj
T* (`ECTOPY_CLASS_NAMES = [...]` are declared in the document) Tj
T* (with no `_CLASS_INDEX` mappings provided.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 714.8128346456693407 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 703.1935433070866566 Td
(__init__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 714.8128346456693407 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 703.1935433070866566 Td
(retrain.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 714.8128346456693407 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 703.1935433070866566 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 714.8128346456693407 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 703.1935433070866566 Td
(48-50) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 714.8128346456693407 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 703.1935433070866566 Td
(1 - The constructor opens the log file directly without ensuring the) Tj
T* (log file's parent directory exists, which can raise) Tj
T* (FileNotFoundError if the directory hasn't been created) Tj
T* (beforehand. - proof: __init__ calls open\(log_file, 'w'\) directly and) Tj
T* (contains no code to create parent directories \(e.g., os.makedirs\),) Tj
T* (so open will raise FileNotFoundError if the path's directory is) Tj
T* (missing.2 - The constructor uses mode 'w' \(truncate\) so it always) Tj
T* (overwrites any existing log file instead of appending, which can) Tj
T* (unintentionally lose prior logs. - proof: the code uses) Tj
T* (open\(log_file, 'w', ...\) and Python's 'w' mode truncates existing) Tj
T* (files on open.3 - There is no error handling around opening the) Tj
T* (log file \(no try/except or fallback\), so failures to open the file will) Tj
T* (raise exceptions that are not handled by the logger. - proof:) Tj
T* (__init__ contains no try/except block, so any exception from) Tj
T* (open\(...\) will propagate out of the constructor.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 582.7242519685039497 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 571.1049606299212655 Td
(__init__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 582.7242519685039497 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 571.1049606299212655 Td
(retrain.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 582.7242519685039497 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 571.1049606299212655 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 582.7242519685039497 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 571.1049606299212655 Td
(90-191) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 582.7242519685039497 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 571.1049606299212655 Td
(1 - The constructor checks for patient_id/admission_id columns) Tj
T* (but does not include them in the SELECT or extract them from) Tj
T* (each row; patient_id and admission_id are always left as None,) Tj
T* (which will break any downstream patient-level splitting or logic) Tj
T* (that depends on actual patient/admission IDs. - proof: The) Tj
T* (SELECT only requests segment_id, arrhythmia_label,) Tj
T* (raw_signal, annotation_type, used_for_training, and the loop sets) Tj
T* (patient_id = None and admission_id = None before appending) Tj
T* (samples, so no real IDs are stored.2 - The code unconditionally) Tj
T* (filters by mistake_target in the WHERE clause without verifying) Tj
T* (that the mistake_target column exists in the table; if that column) Tj
T* (is absent the query will raise a runtime SQL error. - proof:) Tj
T* (target_filter injects "AND mistake_target = '...'" into the query but) Tj
T* (available_cols is never checked for 'mistake_target' before) Tj
T* (executing cur.execute\(query\).) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 450.6356692913385587 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 439.0163779527558745 Td
(analyze_and_suggest) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 450.6356692913385587 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 439.0163779527558745 Td
(balance_dataset.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 450.6356692913385587 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 439.0163779527558745 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 450.6356692913385587 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 439.0163779527558745 Td
(16-122) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 450.6356692913385587 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 439.0163779527558745 Td
(1 - The code calls min\([c for c in counts.values\(\) if c > 0]\) without) Tj
T* (handling the case where no class has >0 samples; if all counts) Tj
T* (are zero this produces an empty sequence and raises a) Tj
T* (ValueError \(function will crash\) - Proof: counts is a non-empty) Tj
T* (dict of zeros when there are no rows, so the list comprehension) Tj
T* (yields [] and min\([]\) raises ValueError since there's no guard) Tj
T* (against an empty list.  2 - The database connection is not) Tj
T* (protected by try/finally or a context manager; conn.close\(\) is only) Tj
T* (called after successful fetch, so exceptions during query/fetch will) Tj
T* (leave the connection open \(resource leak\) - Proof: conn.close\(\) is) Tj
T* (executed only after the with cur: block with no surrounding) Tj
T* (try/finally, so any exception in execute/fetchall will skip) Tj
T* (conn.close\(\) and leave the connection open.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 334.6470866141731904 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 323.0277952755905062 Td
(run_check) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 334.6470866141731904 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 323.0277952755905062 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 334.6470866141731904 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 323.0277952755905062 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 334.6470866141731904 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 323.0277952755905062 Td
(15-22) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 334.6470866141731904 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 323.0277952755905062 Td
(1 - The function catches all exceptions and only prints an error) Tj
T* (message without re-raising or returning any failure indicator, so) Tj
T* (callers cannot programmatically detect check failures \(this can) Tj
T* (break orchestration of downstream model training/retraining) Tj
T* (logic\). - Proof: the code uses "except Exception as e:" and the) Tj
T* (except block only calls print\(f" Check Failed: {e}"\) with no raise or) Tj
T* (return, so exceptions are swallowed and not propagated.2 - The) Tj
T* (function returns no structured result \(no boolean/status or) Tj
T* (exception\), only printing to stdout; therefore it cannot be used by) Tj
T* (calling code to make deterministic decisions about proceeding) Tj
T* (with model training/retraining. - Proof: there is no return) Tj
T* (statement in the function \(implicit return None\), so no structured) Tj
T* (status is provided to callers.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 218.6585039370077936 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 207.0392125984251379 Td
(check_0_connections) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 218.6585039370077936 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 207.0392125984251379 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 218.6585039370077936 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 207.0392125984251379 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 218.6585039370077936 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 207.0392125984251379 Td
(27-36) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 218.6585039370077936 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 207.0392125984251379 Td
(1 - Hardcoded database name in the SQL \("WHERE datname =) Tj
T* ('ecg_analysis'"\) rather than using the provided connection's) Tj
T* (actual database \(e.g., current_database\(\) or conn parameters\),) Tj
T* (so the function can give incorrect results when called with a) Tj
T* (connection to a different DB. - proof: the query string is a literal) Tj
T* ("WHERE datname = 'ecg_analysis'" and the function never) Tj
T* (inspects conn, so it will always filter for ecg_analysis regardless) Tj
T* (of the provided connection.2 - The function only prints results and) Tj
T* (returns nothing, preventing downstream code from) Tj
T* (programmatically using the query results for further checks or) Tj
T* (orchestration \(breaking synergy with other functions expecting) Tj
T* (structured outputs\). - proof: the function only calls print\(\) and) Tj
T* (contains no return statement, so callers cannot access the) Tj
T* (fetched rows.3 - No error handling / no finally block: if get_cursor) Tj
T* (or cur.execute/cur.fetchall raises an exception the cursor will not) Tj
T* (be closed, risking resource leaks. - proof: cur.close\(\) is called) Tj
T* (only at the end with no try/finally or except, so any exception) Tj
T* (before that will skip cursor cleanup.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 62.4199212598424111 99.2125984251968589 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 50.8006299212596559 Td
(check_1_db_table) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 62.4199212598424111 99.2125984251968589 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 50.8006299212596559 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 62.4199212598424111 70.8661417322834666 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 50.8006299212596559 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 62.4199212598424111 56.6929133858267775 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 50.8006299212596559 Td
(38-47) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 62.4199212598424111 212.6028346456064355 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 50.8006299212596559 Td
(1 - The function only prints information and does not return a) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 13 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
29 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 30 0 R
>>
endobj
30 0 obj
<<
/Length 13645
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -132.0885826771653342 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -132.0885826771653342 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -132.0885826771653342 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -132.0885826771653342 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(boolean/structured result indicating whether the table exists, so it) Tj
T* (cannot be used programmatically by downstream checks or) Tj
T* (orchestration logic. - proof: the function has no return statement) Tj
T* (and only uses print\(\), so callers always receive None and no) Tj
T* (structured result.2 - There is no exception handling/finally block) Tj
T* (around DB operations; if an exception occurs before cur.close\(\),) Tj
T* (the cursor can leak \(cursor.close\(\) may never run\). - proof: cur =) Tj
T* (get_cursor\(conn\) and cur.close\(\) are not guarded by) Tj
T* (try/finally/with, so any exception from execute\(\)/fetchone\(\) will) Tj
T* (bypass cur.close\(\).3 - The function does not validate or raise an) Tj
T* (error when the table is missing \(it merely prints the to_regclass) Tj
T* (result\), so it does not enforce the "check" semantics expected) Tj
T* (from a verification routine. - proof: the code prints the value of res) Tj
T* (from to_regclass but contains no conditional check or raise if res) Tj
T* (is None \(table missing\).) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 650.4128346456692498 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 638.7935433070865656 Td
(check_2_columns) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 650.4128346456692498 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 638.7935433070865656 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 650.4128346456692498 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 638.7935433070865656 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 650.4128346456692498 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 638.7935433070865656 Td
(49-76) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 650.4128346456692498 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 638.7935433070865656 Td
(1 - The function queries data_type and is_nullable but never uses) Tj
T* (them - it therefore fails to validate expected data types and) Tj
T* (nullability for required columns \(important for correct model) Tj
T* (training/retraining\). - Proof: the SQL selects column_name,) Tj
T* (data_type, is_nullable but the code only does cols = [r[0] for r in) Tj
T* (rows] and never inspects r[1] or r[2].2 - The cursor is not) Tj
T* (managed in a try/finally \(or context manager\); if cur.execute or) Tj
T* (fetchall raises, cur.close\(\) will not run, causing a potential) Tj
T* (resource leak. - Proof: cur.close\(\) is only called after) Tj
T* (execute/fetchall, so any exception from those calls will skip the) Tj
T* (close.3 - The function only prints results and does not return any) Tj
T* (structured status \(e.g., boolean or list of missing/invalid columns\),) Tj
T* (preventing programmatic coordination with other checks or) Tj
T* (downstream training/retraining logic. - Proof: there is no return) Tj
T* (statement and all outputs are produced via print\(\), so callers) Tj
T* (receive no return value.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 510.2742519685039042 99.2125984251968589 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 498.6549606299212769 Td
(check_3_domain) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 510.2742519685039042 99.2125984251968589 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 498.6549606299212769 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 510.2742519685039042 70.8661417322834666 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 498.6549606299212769 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 510.2742519685039042 56.6929133858267775 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 498.6549606299212769 Td
(78-89) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 510.2742519685039042 212.6028346456064355 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 498.6549606299212769 Td
(1 - The function lacks exception handling for database errors) Tj
T* (\(missing table/columns or query failures\); any SQL error will raise) Tj
T* (and break the checklist flow instead of being handled gracefully. -) Tj
T* (Proof: there is no try/except in the function and cur.execute\(...\)) Tj
T* (calls will propagate any psycopg2 errors out of the function.2 -) Tj
T* (The cursor is not guaranteed to be closed on error \(no try/finally) Tj
T* (or context manager\), leading to potential resource leaks if an) Tj
T* (exception occurs. - Proof: cur.close\(\) is called only at the end of) Tj
T* (the function and there is no try/finally or with-context to ensure) Tj
T* (close\(\) runs on exceptions.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 418.43566929133857 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 406.8163779527559427 Td
(check_4_integrity) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 418.43566929133857 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 406.8163779527559427 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 418.43566929133857 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 406.8163779527559427 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 418.43566929133857 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 406.8163779527559427 Td
(91-110) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 418.43566929133857 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 406.8163779527559427 Td
(1 - The function does not guarantee cursor cleanup on errors \(no) Tj
T* (try/finally or context manager\), so if cur.execute or fetchone) Tj
T* (raises an exception the cursor will not be closed, causing a) Tj
T* (resource leak. - Proof: cur.close\(\) is called only after the) Tj
T* (execute/fetchone calls and there is no try/finally or) Tj
T* (with-statement, so any exception before cur.close\(\) will exit the) Tj
T* (function without closing the cursor.2 - The function only prints the) Tj
T* (check results and returns nothing, preventing other code from) Tj
T* (programmatically consuming these integrity counts for) Tj
T* (downstream logic \(breaking synergistic function composition\). -) Tj
T* (Proof: the function has no return statement and only uses) Tj
T* (print\(...\) for n1 and n2, so callers cannot obtain the counts) Tj
T* (programmatically.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 302.4470866141732586 99.2125984251968589 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 290.8277952755905744 Td
(check_5_used_flag) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 302.4470866141732586 99.2125984251968589 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 290.8277952755905744 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 302.4470866141732586 70.8661417322834666 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 290.8277952755905744 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 302.4470866141732586 56.6929133858267775 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 290.8277952755905744 Td
(112-127) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 302.4470866141732586 212.6028346456064355 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 290.8277952755905744 Td
(1 - The function does not protect cursor/resource cleanup on) Tj
T* (error: it calls cur.close\(\) only at the end, so an exception raised) Tj
T* (by cur.execute or cur.fetchone will skip closing the cursor \(should) Tj
T* (use try/finally or a context manager\). - proof: cur.close\(\) is) Tj
T* (executed only after both execute/fetchone calls; any exception) Tj
T* (thrown beforehand will bypass that line and leave the cursor) Tj
T* (unclosed.2 - The SQL condition uses "used_for_training IS NOT) Tj
T* (FALSE", which will include NULL-valued flags \(NULL is not) Tj
T* (FALSE\) and therefore can produce incorrect counts; the boolean) Tj
T* (comparison is ambiguous and should explicitly handle NULLs) Tj
T* (\(e.g., IS TRUE, <> FALSE, or IS DISTINCT FROM FALSE\)) Tj
T* (depending on the intended semantics. - proof: the WHERE) Tj
T* (clause contains \(used_for_training IS NOT FALSE\), which) Tj
T* (matches TRUE and NULL values, so rows with NULL) Tj
T* (used_for_training are counted.3 - The function only prints n1 and) Tj
T* (n2 and does not return these values for downstream) Tj
T* (programmatic use, preventing other checks or the) Tj
T* (training/retraining logic from consuming the measured metrics. -) Tj
T* (proof: there is no return statement in the function and results are) Tj
T* (only printed via print\(...\).) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 130.108503937007896 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 118.4892125984251834 Td
(check_6_preview) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 130.108503937007896 99.2125984251968589 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 118.4892125984251834 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 130.108503937007896 70.8661417322834666 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 118.4892125984251834 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 130.108503937007896 56.6929133858267775 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 118.4892125984251834 Td
(129-158) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 130.108503937007896 212.6028346456064355 -83.7885826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 118.4892125984251834 Td
(1 - The function only prints query results and does not return the) Tj
T* (fetched rows or any structured data, which prevents other code) Tj
T* (from programmatically using the preview results \(breaking) Tj
T* (expected synergy with downstream logic\). - Proof: the function) Tj
T* (assigns r_rows/e_rows from cur.fetchall\(\) but contains no return) Tj
T* (statement, so those results are never returned to callers and are) Tj
T* (only printed.2 - There is no exception handling around the) Tj
T* (database operations \(get_cursor, execute, fetchall, close\), so DB) Tj
T* (errors will propagate and may leave resources unhandled-this) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 14 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
31 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 32 0 R
>>
endobj
32 0 obj
<<
/Length 14468
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -91.8385826771653626 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -91.8385826771653626 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -91.8385826771653626 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -91.8385826771653626 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(undermines robustness and proper interaction with calling code. -) Tj
T* (Proof: the function contains no try/except/finally and calls) Tj
T* (cur.close\(\) only at the end, so any exception before that will skip) Tj
T* (closing the cursor and propagate.3 - The function does not) Tj
T* (validate the provided conn \(e.g., check for None or closed) Tj
T* (connection\) before calling get_cursor\(conn\), risking failures when) Tj
T* (integrated with calling code that may pass invalid connections. -) Tj
T* (Proof: the function directly calls get_cursor\(conn\) with no checks) Tj
T* (\(None/closed\) on conn, so an invalid connection will cause) Tj
T* (immediate failure in get_cursor or subsequent DB calls.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 690.6628346456692498 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 679.0435433070865656 Td
(check_7_leaking) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 690.6628346456692498 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 679.0435433070865656 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 690.6628346456692498 70.8661417322834666 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 679.0435433070865656 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 690.6628346456692498 56.6929133858267775 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 679.0435433070865656 Td
(160-169) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 690.6628346456692498 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 679.0435433070865656 Td
(1 - The function counts confirmed cases with used_for_training =) Tj
T* (FALSE instead of TRUE, so it will not flag confirmed cases that) Tj
T* (were included in training \(leakage\). - proof: The SQL WHERE) Tj
T* (clause explicitly uses "used_for_training = FALSE", therefore) Tj
T* (rows with used_for_training = TRUE \(the leaking cases\) are) Tj
T* (excluded from the count.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 631.0242519685039042 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 619.4049606299212201 Td
(check_8_time) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 631.0242519685039042 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 619.4049606299212201 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 631.0242519685039042 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 619.4049606299212201 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 631.0242519685039042 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 619.4049606299212201 Td
(171-181) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 631.0242519685039042 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 619.4049606299212201 Td
(1 - The function does not guard cursor use with try/finally or) Tj
T* (exception handling; if cur.execute or cur.fetchone raises,) Tj
T* (cur.close\(\) will not run and the DB cursor/resource can be leaked.) Tj
T* (- cur.close\(\) is only called after fetchone\(\); if cur.execute or) Tj
T* (cur.fetchone raises an exception control exits the function before) Tj
T* (cur.close\(\), so the cursor is not closed.2 - It only checks presence) Tj
T* (\(NULL vs non-NULL\) of segment_start_s but does not validate) Tj
T* (that segment_start_s is a proper datetime/timestamp, has) Tj
T* (consistent timezone/granularity, or that timestamps permit a) Tj
T* (time-based train/validation split \(ordering, uniqueness,) Tj
T* (distribution\), so it does not actually perform a complete) Tj
T* ("time-based split sanity" check. - The SQL only computes) Tj
T* (COUNT\(*\) and COUNT\(segment_start_s\), which only tests) Tj
T* (nullness and performs no type, ordering, timezone, uniqueness,) Tj
T* (or distribution validation.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 498.93566929133857 99.2125984251968589 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 487.3163779527558859 Td
(check_10_summary) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 498.93566929133857 99.2125984251968589 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 487.3163779527558859 Td
(verify_db_checklist.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 498.93566929133857 70.8661417322834666 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 487.3163779527558859 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 498.93566929133857 56.6929133858267775 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 487.3163779527558859 Td
(183-197) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 498.93566929133857 212.6028346456064355 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 487.3163779527558859 Td
(1 - The function does not guard against exceptions and may leak) Tj
T* (the DB cursor \(no try/finally or context manager to ensure) Tj
T* (cur.close\(\) runs on error\). - Proof: cur.close\(\) is only called at the) Tj
T* (end with no try/finally or with-statement, so any exception raised) Tj
T* (before that will skip close\(\) and leave the cursor open.2 - The) Tj
T* (function only prints the summary and does not return any) Tj
T* (structured data, preventing programmatic consumption/reuse by) Tj
T* (downstream model training or retraining logic. - Proof: there is no) Tj
T* (return statement and all output is printed, so callers cannot) Tj
T* (access the fetched rows programmatically.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 407.0970866141732358 99.2125984251968589 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 395.4777952755906085 Td
(run_migration) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 407.0970866141732358 99.2125984251968589 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 395.4777952755906085 Td
(db_migration.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 407.0970866141732358 70.8661417322834666 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 395.4777952755906085 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 407.0970866141732358 56.6929133858267775 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 395.4777952755906085 Td
(5-80) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 407.0970866141732358 212.6028346456064355 -172.3385826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 395.4777952755906085 Td
(1 - The inline comment says "We use Text instead of ENUM...") Tj
T* (but the code adds mistake_target as VARCHAR\(20\),) Tj
T* (contradicting the stated intent and potentially limiting/stressing) Tj
T* (the expected flexibility of the column type. - proof: the executed) Tj
T* (SQL is "ADD COLUMN mistake_target VARCHAR\(20\)" in the) Tj
T* (migration, so the column is created as VARCHAR\(20\) not) Tj
T* (TEXT/ENUM as the comment states.2 - On any exception the) Tj
T* (function calls sys.exit\(1\), forcibly terminating the whole process) Tj
T* (instead of raising/propagating the error for the caller to handle -) Tj
T* (this breaks proper orchestration with downstream) Tj
T* (training/retraining logic. - proof: the except Exception as e: block) Tj
T* (ends with sys.exit\(1\), which exits the Python process rather than) Tj
T* (re-raising the exception.3 - The information_schema checks filter) Tj
T* (only by table_name and do not include table_schema \(or use) Tj
T* (table_schema=current_schema\(\)\), so the presence checks can) Tj
T* (be wrong when the table is in a non-default schema or multiple) Tj
T* (schemas contain the same table name. - proof: both SELECTs) Tj
T* (query information_schema.columns with WHERE) Tj
T* (table_name='ecg_features_annotatable' AND column_name=...) Tj
T* (and contain no table_schema filter.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 234.7585039370078448 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 223.1392125984252743 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 234.7585039370078448 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 223.1392125984252743 Td
(IMPLEMENTATION_PLAN_) Tj
T* (FIX_SINUS.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 234.7585039370078448 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 223.1392125984252743 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 234.7585039370078448 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 223.1392125984252743 Td
(1-83) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 234.7585039370078448 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 223.1392125984252743 Td
(1 - The runtime "Double Safety" check is logically incorrect: it) Tj
T* (tests RETRAIN_CLASS_NAMES[label_idx] against) Tj
T* (EXCLUDED_PURE_SINUS, but RETRAIN_CLASS_NAMES was) Tj
T* (defined by excluding EXCLUDED_PURE_SINUS, so this check) Tj
T* (can never detect a leaked pure-Sinus label \(and may be indexing) Tj
T* (the wrong label space\). - Proof: RETRAIN_CLASS_NAMES is) Tj
T* (built as [c for c in CLASS_NAMES if c not in) Tj
T* (EXCLUDED_PURE_SINUS], yet the sanity check does if) Tj
T* (RETRAIN_CLASS_NAMES[label_idx] in) Tj
T* (EXCLUDED_PURE_SINUS, so nothing in) Tj
T* (RETRAIN_CLASS_NAMES can match) Tj
T* (EXCLUDED_PURE_SINUS and the condition cannot be true.2 -) Tj
T* (RETRAIN_CLASS_NAMES is built by direct string membership) Tj
T* (against EXCLUDED_PURE_SINUS without applying) Tj
T* (normalization. - Proof: The comprehension uses CLASS_NAMES) Tj
T* (values verbatim \(no normalize_label call\), so only exact-string) Tj
T* (matches to EXCLUDED_PURE_SINUS are excluded and) Tj
T* (normalized/whitespace/case variants could be missed.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 78.5199212598425476 99.2125984251968589 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 66.9006299212597924 Td
(write) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 78.5199212598425476 99.2125984251968589 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 66.9006299212597924 Td
(train_balanced.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 78.5199212598425476 70.8661417322834666 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 66.9006299212597924 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 78.5199212598425476 56.6929133858267775 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 66.9006299212597924 Td
(40-43) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 78.5199212598425476 212.6028346456064355 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 66.9006299212597924 Td
(1 - The method flushes only the file log \(self.log.flush\(\)\) and does) Tj
T* (not flush the terminal \(self.terminal\), which can leave console) Tj
T* (output buffered and out of sync with the log. - proof: the function) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 15 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
33 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 34 0 R
>>
endobj
34 0 obj
<<
/Length 14676
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -75.7385826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -75.7385826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -75.7385826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -75.7385826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(calls self.log.flush\(\) but contains no call to self.terminal.flush\(\)) Tj
T* (after writing to terminal.2 - The method lacks error handling) Tj
T* (around the two writes; if self.terminal.write\(message\) raises,) Tj
T* (self.log.write\(message\) never runs \(and vice versa\), making) Tj
T* (logging brittle and potentially losing output. - proof: write executes) Tj
T* (self.terminal.write then self.log.write sequentially with no) Tj
T* (try/except, so an exception in the first call prevents the second) Tj
T* (from running and stops the flush.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 706.7628346456692725 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 695.1435433070865884 Td
(forward) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 706.7628346456692725 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 695.1435433070865884 Td
(train_balanced.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 706.7628346456692725 70.8661417322834666 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 695.1435433070865884 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 706.7628346456692725 56.6929133858267775 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 695.1435433070865884 Td
(66-70) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 706.7628346456692725 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 695.1435433070865884 Td
(1 - The function passes class weights into F.cross_entropy so pt) Tj
T* (becomes p_t ** weight, making the focal term use p_t**weight) Tj
T* (instead of p_t. - proof: F.cross_entropy applies class weight) Tj
T* (multiplicatively \(ce = -w_c * log p_t\), so pt = exp\(-ce\) = p_t**w_c) Tj
T* (and therefore \(\(1 - pt\)**gamma\) evaluates to \(1 -) Tj
T* (p_t**w_c\)**gamma rather than \(1 - p_t\)**gamma.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 647.1242519685039269 99.2125984251968589 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 635.5049606299212428 Td
(__getitem__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 647.1242519685039269 99.2125984251968589 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 635.5049606299212428 Td
(train_balanced.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 647.1242519685039269 70.8661417322834666 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 635.5049606299212428 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 647.1242519685039269 56.6929133858267775 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 635.5049606299212428 Td
(188-203) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 647.1242519685039269 212.6028346456064355 -91.8385826771653626 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 635.5049606299212428 Td
(1 - __getitem__ returns the cached numpy array by reference) Tj
T* (when self.augment is False \(sig = self.signal_cache.get\(...\)\)) Tj
T* (instead of returning a copy or a tensor; this allows downstream) Tj
T* (in-place ops to mutate the cache and cause data) Tj
T* (contamination/leakage across samples/epochs, which can break) Tj
T* (training/retraining correctness. - proof: The code sets sig =) Tj
T* (self.signal_cache.get\(seg_id, ...\) and when self.augment is False) Tj
T* (does not copy it before returning, so any in-place mutation of that) Tj
T* (numpy array will modify the cached object stored in) Tj
T* (self.signal_cache.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 555.2856692913386496 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 543.6663779527559655 Td
(train_epoch) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 555.2856692913386496 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 543.6663779527559655 Td
(train_balanced.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 555.2856692913386496 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 543.6663779527559655 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 555.2856692913386496 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 543.6663779527559655 Td
(233-259) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 555.2856692913386496 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 543.6663779527559655 Td
(1 - The function unconditionally divides by len\(y_true\) to compute) Tj
T* (the average loss; if the loader yields zero samples \(empty loader) Tj
T* (/ zero batches\) this will raise a ZeroDivisionError - there is no) Tj
T* (guard or handling for an empty epoch. - proof: y_true is initialized) Tj
T* (as [] and only extended inside the loop, so if the loader yields no) Tj
T* (batches len\(y_true\) == 0 and total_loss / len\(y_true\) will raise a) Tj
T* (ZeroDivisionError.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 487.5970866141732358 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 475.9777952755906085 Td
(calculate_metrics_report) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 487.5970866141732358 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 475.9777952755906085 Td
(metrics.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 487.5970866141732358 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 475.9777952755906085 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 487.5970866141732358 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 475.9777952755906085 Td
(5-37) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 487.5970866141732358 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 475.9777952755906085 Td
(1 - classification_report is called with target_names=class_names) Tj
T* (while confusion_matrix is called with) Tj
T* (labels=range\(len\(class_names\)\); this inconsistent label handling) Tj
T* (will produce mismatched/incorrect metrics when y_true/y_pred) Tj
T* (are not encoded as 0..n-1 - proof: classification_report maps y) Tj
T* (labels to target_names but confusion_matrix is forced to look for) Tj
T* (integer labels 0..n-1, so if y_true/y_pred are string class names) Tj
T* (the confusion matrix will not match those labels \(yielding) Tj
T* (incorrect/zero counts\).2 - The function computes per-class) Tj
T* (sensitivity \(sens\) inside the loop but never returns or injects these) Tj
T* (sensitivity values into the output; the docstring promises) Tj
T* (sensitivity and specificity but sensitivity is not explicitly provided) Tj
T* (by the function - proof: sens is assigned each loop iteration but) Tj
T* (never stored in specificities or added to cr and the function only) Tj
T* (returns \(cr, specificities\), so the local sens values are unused.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 355.5085039370078448 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 343.8892125984252175 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 355.5085039370078448 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 343.8892125984252175 Td
(MODEL_INTENT.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 355.5085039370078448 70.8661417322834666 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 343.8892125984252175 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 355.5085039370078448 56.6929133858267775 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 343.8892125984252175 Td
(1-29) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 355.5085039370078448 212.6028346456064355 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 343.8892125984252175 Td
(1 - The document lacks any code-level interface details showing) Tj
T* (how SmallCNN outputs are consumed by TransformerEncoder) Tj
T* (\(no tensor shapes, API/function calls, embedding dimensions, or) Tj
T* (example call sequence\), so it does not check whether the) Tj
T* (functions are called correctly or interoperate as required. - Proof:) Tj
T* (The Markdown only gives high-level roles for SmallCNN and) Tj
T* (TransformerEncoder and contains no tensor shapes, embedding) Tj
T* (dimensions, API/function calls, or example call sequence.  2 -) Tj
T* (There is no description of model training or retraining logic \(no) Tj
T* (loss functions, optimizers, learning rate schedule, training loop,) Tj
T* (checkpointing, evaluation metrics, or retraining triggers\), so the) Tj
T* (requirement to verify training/retraining logic is not met. - Proof:) Tj
T* (The document discusses architecture and rationale but includes) Tj
T* (no training details such as loss, optimizer, LR schedule, training) Tj
T* (loop, checkpoints, metrics, or retraining triggers.  3 - The) Tj
T* (document contains no verification or testing information) Tj
T* (demonstrating that the components work synergistically in) Tj
T* (practice \(no unit/integration tests, expected runtime behavior, or) Tj
T* (empirical evidence of the hybrid architecture's correctness\). -) Tj
T* (Proof: The Markdown provides only design intent and rationale) Tj
T* (and contains no unit/integration tests, runtime expectations,) Tj
T* (benchmarks, or empirical results.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 167.0699212598425163 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 155.4506299212598606 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 167.0699212598425163 99.2125984251968589 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 155.4506299212598606 Td
(IMPLEMENTATION_PLAN_) Tj
T* (REMOVE_COMPOSITES.m) Tj
T* (d) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 167.0699212598425163 70.8661417322834666 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 155.4506299212598606 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 167.0699212598425163 56.6929133858267775 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 155.4506299212598606 Td
(1-66) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 167.0699212598425163 212.6028346456064355 -124.038582677165337 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 155.4506299212598606 Td
(1 - The plan's Core Constraints claim maps "Sinus + X" to "Sinus") Tj
T* (\(dropped\) but the code sets base_rhythm = parts[0] and returns) Tj
T* (get_retrain_label_idx\(base_rhythm\), so the implementation uses) Tj
T* (the literal base token \(e.g., "Sinus Bradycardia"\) rather than the) Tj
T* (normalized "Sinus" - proof: Core Constraints text states "Sinus +) Tj
T* (X -> 'Sinus'" while the get_retrain_label_idx code clearly extracts) Tj
T* (and recurses on parts[0].  2 - The implementation and verification) Tj
T* (reference RETRAIN_CLASS_INDEX \(and CLASS_NAMES /) Tj
T* (EXCLUDED_PURE_SINUS\) but the snippet only shows building) Tj
T* (RETRAIN_CLASS_NAMES and does not define or show how) Tj
T* (RETRAIN_CLASS_INDEX is constructed or kept in sync - proof:) Tj
T* (get_retrain_label_idx uses RETRAIN_CLASS_INDEX and the) Tj
T* (verification asserts it, yet no RETRAIN_CLASS_INDEX) Tj
T* (assignment is present in the provided Markdown.  3 - The) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 16 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
35 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 36 0 R
>>
endobj
36 0 obj
<<
/Length 13554
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -67.6885826771653427 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(document modifies data loader and verification assertions but) Tj
T* (does not show any updates or tests for training/retraining pipeline) Tj
T* (components \(training loop, loss, checkpoints, class weights,) Tj
T* (dataset splits, evaluation\) so end-to-end propagation is unverified) Tj
T* (- proof: Proposed Changes and Verification sections only touch) Tj
T* (data_loader.py and verify_retrain_setup.py with no references to) Tj
T* (training code or downstream artifacts.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 714.8128346456693407 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 703.1935433070866566 Td
(evaluate) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 714.8128346456693407 99.2125984251968589 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 703.1935433070866566 Td
(evaluate_detailed.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 714.8128346456693407 70.8661417322834666 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 703.1935433070866566 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 714.8128346456693407 56.6929133858267775 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 703.1935433070866566 Td
(176-250) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 714.8128346456693407 212.6028346456064355 -148.1885826771653569 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 703.1935433070866566 Td
(1 - The code redirects sys.stdout to the report file but does not) Tj
T* (guarantee restoration on exception \(no try/finally or use of) Tj
T* (contextlib.redirect_stdout\). If print_evaluation_report or file IO) Tj
T* (raises, sys.stdout will remain redirected, causing global side) Tj
T* (effects. - Proof: the code does original_stdout = sys.stdout; then) Tj
T* (inside with open\(...\): sys.stdout = f; print_evaluation_report\(...\);) Tj
T* (and only after the with-block does it do sys.stdout =) Tj
T* (original_stdout, so any exception inside the with prevents the) Tj
T* (restoration line from running.2 - The function writes the evaluation) Tj
T* (report to BASE_DIR/.../logs/... without ensuring the parent) Tj
T* (directories exist. If the "outputs/logs" directory is missing,) Tj
T* (open\(report_file, 'w'\) will raise and the evaluation will fail. - Proof:) Tj
T* (report_file is built as) Tj
T* (BASE_DIR/"models_training"/"outputs"/"logs"/..., and the code) Tj
T* (calls open\(report_file, 'w'\) without any mkdir\(parents=True\) or) Tj
T* (existence check, so Python will raise FileNotFoundError if the) Tj
T* (parent directory does not exist.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 566.6242519685039269 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 555.0049606299212428 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 566.6242519685039269 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 555.0049606299212428 Td
(BUG_FIXES_APPLIED.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 566.6242519685039269 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 555.0049606299212428 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 566.6242519685039269 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 555.0049606299212428 Td
(1-234) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 566.6242519685039269 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 555.0049606299212428 Td
(1 - The patient-level split snippet uses patient_ids but calls) Tj
T* (train_test_split\(unique_patient_list, ..., stratify=patient_labels\)) Tj
T* (where unique_patient_list and patient_labels are never defined in) Tj
T* (the snippet - the snippet shows patient_ids earlier but no) Tj
T* (definitions for unique_patient_list or patient_labels.  2 - The) Tj
T* (__getitem__ example accepts idx but calls) Tj
T* (self.signal_cache.get\(seg_id, ...\) while seg_id is never derived) Tj
T* (from idx or defined in the method - the snippet shows idx in the) Tj
T* (signature and only seg_id in the body.  3 - The Markdown) Tj
T* (declares the training script "production-ready" but the document) Tj
T* (contains no training loop, checkpointing, optimizer/state handling,) Tj
T* (or any training/validation execution code to substantiate that) Tj
T* (claim - none of those artifacts appear in the provided content.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 450.6356692913385587 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 439.0163779527558745 Td
(run_migration_ectopy) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 450.6356692913385587 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 439.0163779527558745 Td
(db_migration_ectopy.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 450.6356692913385587 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 439.0163779527558745 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 450.6356692913385587 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 439.0163779527558745 Td
(5-55) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 450.6356692913385587 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 439.0163779527558745 Td
(1 - Hardcoded database credentials \(host, database, user,) Tj
T* (password\) are embedded directly in the function instead of being) Tj
T* (loaded from configuration or environment variables. - The) Tj
T* (function creates conn_params with literal "host", "database",) Tj
T* ("user", and "password" string values defined inline.2 - The) Tj
T* (migration sets a default value of the literal string 'None' for) Tj
T* (ectopy_label instead of using NULL or an appropriate sentinel,) Tj
T* (which can break downstream logic/model training that expects) Tj
T* (NULL/absent values. - The ALTER TABLE statement explicitly) Tj
T* (adds "ectopy_label VARCHAR\(50\) DEFAULT 'None'", i.e., the) Tj
T* (literal string 'None' is used as the default.3 - The function calls) Tj
T* (sys.exit\(1\) inside its exception handler, forcibly terminating the) Tj
T* (process rather than raising the exception or returning an error for) Tj
T* (the caller to handle. - The except block prints the error and calls) Tj
T* (sys.exit\(1\), which will exit the process on any caught exception.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 318.5470866141732245 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 306.9277952755904835 Td
(evaluate_rhythm) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 318.5470866141732245 99.2125984251968589 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 306.9277952755904835 Td
(evaluate_rhythm.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 318.5470866141732245 70.8661417322834666 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 306.9277952755904835 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 318.5470866141732245 56.6929133858267775 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 306.9277952755904835 Td
(19-94) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 318.5470866141732245 212.6028346456064355 -156.2385826771653399 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 306.9277952755904835 Td
(1 - The checkpoint loading logic only checks for "model_state") Tj
T* (and otherwise passes the entire checkpoint dict to) Tj
T* (model.load_state_dict; it does not handle the common) Tj
T* ("state_dict" key \(or other checkpoint wrappers\), which will cause) Tj
T* (load_state_dict to fail or receive an unexpected structure for) Tj
T* (many typical checkpoints. - Proof: The code does state =) Tj
T* (torch.load\(...\); model.load_state_dict\(state["model_state"] if) Tj
T* ("model_state" in state else state\) so a checkpoint with) Tj
T* ("state_dict" will fall to the else branch and pass the whole) Tj
T* (wrapper dict \(not state["state_dict"]\) into load_state_dict, leading) Tj
T* (to key mismatches or errors.2 - The code calls y.numpy\(\) when) Tj
T* (aggregating labels \(y_true.extend\(y.numpy\(\)\)\) without ensuring y) Tj
T* (is a CPU tensor; if collate_fn or the dataset returns y on the GPU) Tj
T* (or returns a non-tensor type, this will raise an exception. - Proof:) Tj
T* (Inside the loop for x, y, _, _ in loader the code directly does) Tj
T* (y_true.extend\(y.numpy\(\)\) with no .cpu\(\) or type check, so a) Tj
T* (CUDA tensor will cause a RuntimeError and a non-tensor will) Tj
T* (cause AttributeError.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 162.3085039370078277 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 150.6892125984251152 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 162.3085039370078277 99.2125984251968589 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 150.6892125984251152 Td
(IMPLEMENTATION_PLAN_) Tj
T* (REMOVE_SINUS.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 162.3085039370078277 70.8661417322834666 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 150.6892125984251152 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 162.3085039370078277 56.6929133858267775 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 150.6892125984251152 Td
(1-120) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 162.3085039370078277 212.6028346456064355 -115.9885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 150.6892125984251152 Td
(1 - SQL vs Python filtering mismatch: the proposed SQL) Tj
T* (excludes abbreviations \('SR','SB','ST'\) but) Tj
T* (RETRAIN_CLASS_NAMES only filters names containing "Sinus") Tj
T* (\(and optionally "Artifact"\), so abbreviation labels could remain in) Tj
T* (the class list while being removed by SQL - the SQL NOT IN) Tj
T* (clause includes 'SR','SB','ST' but the RETRAIN_CLASS_NAMES) Tj
T* (comprehension does not filter those strings.  2 -) Tj
T* (Label-normalization / mapping inconsistency:) Tj
T* (get_retrain_label\(...\) is defined but the processing loop uses) Tj
T* (normalize_label\(...\) then directly checks) Tj
T* (RETRAIN_CLASS_INDEX membership, so the plan never) Tj
T* (ensures normalize_label's outputs align with) Tj
T* (RETRAIN_CLASS_INDEX keys - the snippet shows) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 17 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
37 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 38 0 R
>>
endobj
38 0 obj
<<
/Length 13580
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -19.3885826771653562 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -19.3885826771653562 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(get_retrain_label unused while the loop relies on normalize_label.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 763.1128346456691816 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 751.4935433070866111 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 763.1128346456691816 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 751.4935433070866111 Td
(IMPLEMENTATION_PLAN_) Tj
T* (SPLIT_MODELS.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 763.1128346456691816 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 751.4935433070866111 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 763.1128346456691816 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 751.4935433070866111 Td
(1-86) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 763.1128346456691816 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 751.4935433070866111 Td
(1 - Contradictory Bigeminy mapping between Model B classes) Tj
T* (and mapper: Model B classes list Bigeminy under both "PVC") Tj
T* (and "PAC", while get_ectopy_label_idx explicitly maps) Tj
T* ("Bigeminy/Trigeminy" to "PVC", proving a contradiction.  2 -) Tj
T* (Incomplete Rhythm SQL_FILTER: the document shows "WHERE) Tj
T* (arrhythmia_label != 'Sinus Rhythm'..." with an ellipsis, so the full) Tj
T* (WHERE clause/filter logic is not specified.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 695.4242519685038815 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 683.8049606299211973 Td
(__init__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 695.4242519685038815 99.2125984251968589 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 683.8049606299211973 Td
(models.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 695.4242519685038815 70.8661417322834666 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 683.8049606299211973 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 695.4242519685038815 56.6929133858267775 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 683.8049606299211973 Td
(60-91) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 695.4242519685038815 212.6028346456064355 -164.2885826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 683.8049606299211973 Td
(1 - Uses a mutable default argument for cnn_channels) Tj
T* (\(cnn_channels=[32, 64, 128]\) in the __init__ signature, which is a) Tj
T* (potential bug \(shared mutable state across instances\). - proof:) Tj
T* (the __init__ signature uses a list literal as a default) Tj
T* (\(cnn_channels=[32, 64, 128]\); that list is created once at) Tj
T* (definition time and would be shared if mutated across instances.2) Tj
T* (- The initializer does not create or register any positional) Tj
T* (encoding / temporal embedding for the Transformer; without) Tj
T* (positional information the Transformer cannot use sequence) Tj
T* (order, which breaks the intended CNNTransformer temporal) Tj
T* (synergy. - proof: __init__ defines no positional embedding module) Tj
T* (and forward passes z straight into self.transformer_encoder \(z is) Tj
T* (not augmented with any positional encodings\).3 - The class-level) Tj
T* (TARGET_LEN \(2500\) is not used or validated in this __init__;) Tj
T* (there is no enforcement or handling of expected input length) Tj
T* (which can lead to mismatches during training/inference. - proof:) Tj
T* (TARGET_LEN is declared on the class but neither __init__ nor) Tj
T* (forward reference or check TARGET_LEN, so input length is) Tj
T* (neither validated nor enforced.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 531.1356692913385587 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 519.5163779527558745 Td
(forward) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 531.1356692913385587 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 519.5163779527558745 Td
(models.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 531.1356692913385587 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 519.5163779527558745 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 531.1356692913385587 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 519.5163779527558745 Td
(93-100) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 531.1356692913385587 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 519.5163779527558745 Td
(1 - The sequence embeddings are passed to the) Tj
T* (TransformerEncoder with no positional encoding added \(no) Tj
T* (learned or fixed positional embeddings\), so the transformer has) Tj
T* (no explicit information about token/time order. - proof: forward) Tj
T* (permutes z and directly calls self.transformer_encoder\(z\) with no) Tj
T* (positional additions, and __init__ defines no positional) Tj
T* (embedding/encoding module.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 463.4470866141732586 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 451.8277952755905744 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 463.4470866141732586 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 451.8277952755905744 Td
(IMPLEMENTATION_PLAN_) Tj
T* (VALIDATION_STRATEGY.m) Tj
T* (d) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 463.4470866141732586 70.8661417322834666 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 451.8277952755905744 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 463.4470866141732586 56.6929133858267775 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 451.8277952755905744 Td
(1-35) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 463.4470866141732586 212.6028346456064355 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 451.8277952755905744 Td
(1 - The plan adds segment_start_s to each sample tuple but) Tj
T* (does not specify updating all code paths that unpack/use sample) Tj
T* (tuples \(e.g., ECGRawDatasetSQL.__getitem__, collate_fn,) Tj
T* (dataloader consumers\). Changing the tuple structure will break) Tj
T* (existing function calls that expect the old schema. - The) Tj
T* (document explicitly changes the tuple shape to include) Tj
T* (segment_start_s but contains no instructions to update any) Tj
T* (unpacking sites or consumers that would rely on the previous) Tj
T* (tuple layout.2 - The document triggers the time-based branch) Tj
T* (only when len\(unique_patients\) <= 1, but the Objective explicitly) Tj
T* (calls out "single-patient \(or few-patient\) scenarios." The plan) Tj
T* (therefore fails to handle "few-patient" cases \(small patient counts) Tj
T* (>1\) where random patient-level splitting may still be unsafe. - The) Tj
T* (proposed check is exactly len\(unique_patients\) <= 1, so datasets) Tj
T* (with 2+ patients will not use the time-based split despite the) Tj
T* (stated goal.3 - The plan mandates "No Shuffling" but omits) Tj
T* (explicit instructions to disable all downstream shuffling \(e.g.,) Tj
T* (DataLoader shuffle=True, Samplers, or other train/val sampling) Tj
T* (utilities\). Without those changes, shuffling could be reintroduced) Tj
T* (and re-enable leakage. - The proposal sorts and assigns splits) Tj
T* (but contains no guidance to set DataLoader/Sampler shuffle flags) Tj
T* (to False or otherwise prevent downstream re-shuffling.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 275.0085039370079585 99.2125984251968589 -228.6885826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 263.3892125984252743 Td
(file) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 275.0085039370079585 99.2125984251968589 -228.6885826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 263.3892125984252743 Td
(IMPLEMENTATION_PLAN_) Tj
T* (MISTAKES_AND_WEIGHT) Tj
T* (S.md) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 275.0085039370079585 70.8661417322834666 -228.6885826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 263.3892125984252743 Td
(N/A) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 275.0085039370079585 56.6929133858267775 -228.6885826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 263.3892125984252743 Td
(1-52) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 275.0085039370079585 212.6028346456064355 -228.6885826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 263.3892125984252743 Td
(1 - The plan omits any validation / holdout / evaluation procedure) Tj
T* (\(metrics, validation set, or test set\) for retraining - it only mentions) Tj
T* (a "Dry-run to ensure loss stability," which is insufficient to detect) Tj
T* (overfitting or measure generalization when training on a much) Tj
T* (smaller, mistake-only dataset. - Proof: The only Verification step) Tj
T* (shown is "Log the new dataset size... Dry-run to ensure loss) Tj
T* (stability," and the document contains no mention of validation/test) Tj
T* (splits, evaluation metrics, or holdout procedures.2 - The) Tj
T* (document instructs clamping class weights \(`class_weights =) Tj
T* (torch.clamp\(class_weights, max=5.0\)`\) but does not specify) Tj
T* (recomputing those class weights after applying the mistake-only) Tj
T* (filter - clamping precomputed weights from the original) Tj
T* (distribution would be incorrect for the new training set. - Proof:) Tj
T* (Change 4.B prescribes torch.clamp in retrain_model\(\), and) Tj
T* (Change 5 introduces a mistake-only SQL filter, but nowhere does) Tj
T* (the document state that class weights are recomputed on the) Tj
T* (filtered dataset.3 - Change 5 mandates excluding all correct) Tj
T* (predictions and training strictly on mistakes/borderline samples) Tj
T* (without any mitigation \(e.g., reintroducing a controlled fraction of) Tj
T* (representative correct/normal examples or other calibration\) - this) Tj
T* (creates a clear class-prior / distribution-shift risk and no) Tj
T* (countermeasure is specified. - Proof: The SQL filter uses) Tj
T* (annotation_type IN) Tj
T* (\('FALSE_POSITIVE','FALSE_NEGATIVE','BORDERLINE'\) and) Tj
T* (the text explicitly says "Correct predictions \('REDUNDANT' data\)) Tj
T* (are now strictly excluded," with no subsequent mitigation or) Tj
T* (calibration strategy described.) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 18 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
39 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 40 0 R
>>
endobj
40 0 obj
<<
/Length 13867
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 770.8821259842519567 Td
(get_rhythm_label_idx) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 770.8821259842519567 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 770.8821259842519567 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 770.8821259842519567 Td
(96-111) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(1 - The function contradicts its docstring for ectopy labels \(e.g.,) Tj
T* ("PVCs"\): it can return a valid RHYTHM_INDEX for labels like) Tj
T* ("PVCs" instead of dropping them \(returning None\). This happens) Tj
T* (because RHYTHM_INDEX \(built from) Tj
T* (RHYTHM_CLASS_NAMES\) includes ectopy class names, so) Tj
T* (get_rhythm_label_idx\(normalize_label\("PVC"\) / "PVCs"\) will yield) Tj
T* (an index rather than None. - proof: CLASS_NAMES contains) Tj
T* ("PVCs" and the RHYTHM_CLASS_NAMES filter does not) Tj
T* (exclude it so RHYTHM_INDEX maps "PVCs" to an index, and) Tj
T* (LABEL_MAP maps "PVC" -> "PVCs", hence the function will) Tj
T* (return that index.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 682.6128346456692952 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 670.9935433070866111 Td
(normalize_label) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 682.6128346456692952 99.2125984251968589 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 670.9935433070866111 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 682.6128346456692952 70.8661417322834666 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 670.9935433070866111 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 682.6128346456692952 56.6929133858267775 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 670.9935433070866111 Td
(186-216) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 682.6128346456692952 212.6028346456064355 -188.4385826771653285 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 670.9935433070866111 Td
(1 - The function does not guarantee the returned label is a) Tj
T* (member of CLASS_NAMES: the composite path builds strings) Tj
T* (like "Atrial Fibrillation + PVCs" that do not match the entries in) Tj
T* (CLASS_NAMES, so downstream code that expects labels to be) Tj
T* (exactly in CLASS_NAMES \(e.g. index lookups\) can fail. - proof:) Tj
T* (normalize_label\("AF+PVC"\) splits and normalizes parts to "Atrial) Tj
T* (Fibrillation" and "PVCs" \(via LABEL_MAP\), returning "Atrial) Tj
T* (Fibrillation + PVCs" which is not present in CLASS_NAMES.2 -) Tj
T* (Inconsistent canonicalization for PVC: LABEL_MAP maps "PVC") Tj
T* (-> "PVCs" \(plural\) but composite class names in CLASS_NAMES) Tj
T* (use "PVC" \(singular\). This mismatch causes composite outputs) Tj
T* (to differ from the canonical CLASS_NAMES entries and breaks) Tj
T* (label synergy/indexing. - proof: LABEL_MAP contains '"PVC":) Tj
T* ("PVCs"' while CLASS_NAMES contains entries like "Atrial) Tj
T* (Fibrillation + PVC" \(singular\), so normalize_label will produce) Tj
T* ("PVCs" where CLASS_NAMES expects "PVC".3 - The function) Tj
T* (uses "Sinus Rhythm" as the silent default for None or any) Tj
T* (unknown/uncaught label which will silently reassign unknown or) Tj
T* (invalid labels to a normal class instead of flagging them. - proof:) Tj
T* (the code returns "Sinus Rhythm" immediately when label is None) Tj
T* (and also returns "Sinus Rhythm" as the final fallback for any) Tj
T* (unmatched input.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 494.1742519685039383 99.2125984251968589 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 482.554960629921311 Td
(__init__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 494.1742519685039383 99.2125984251968589 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 482.554960629921311 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 494.1742519685039383 70.8661417322834666 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 482.554960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 494.1742519685039383 56.6929133858267775 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 482.554960629921311 Td
(229-243) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 494.1742519685039383 212.6028346456064355 -75.7385826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 482.554960629921311 Td
(1 - The __init__ method only checks Path.exists\(\) but does not) Tj
T* (verify Path.is_dir\(\); it can accept a file path \(or non-directory\) and) Tj
T* (proceed, causing unexpected behavior when listing JSONs and) Tj
T* (breaking downstream data loading robustness. - Proof: the code) Tj
T* (only calls self.data_dir.exists\(\), so an existing file path passes) Tj
T* (that check, but self.data_dir.glob\("*.json"\) will yield no files \(or fail) Tj
T* (for non-dir\), causing len\(self.files\)==0 and a RuntimeError\("No) Tj
T* (JSON files found..."\), demonstrating the issue.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 418.4356692913386269 99.2125984251968589 -204.5385826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 406.8163779527559427 Td
(_resample_and_fixlen) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 418.4356692913386269 99.2125984251968589 -204.5385826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 406.8163779527559427 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 418.4356692913386269 70.8661417322834666 -204.5385826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 406.8163779527559427 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 418.4356692913386269 56.6929133858267775 -204.5385826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 406.8163779527559427 Td
(305-333) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 418.4356692913386269 212.6028346456064355 -204.5385826771653228 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 406.8163779527559427 Td
(1 - The function does not guard against orig_fs == 0 \(or) Tj
T* (negative\), so the division len\(sig\) * TARGET_FS / orig_fs can) Tj
T* (raise a ZeroDivisionError; because the fallback interpolation) Tj
T* (recomputes the same division outside the try/except, that) Tj
T* (ZeroDivisionError will propagate and crash the loader. - proof: If) Tj
T* (orig_fs == 0, int\(orig_fs\) == 0 so the initial resample attempt) Tj
T* (raises ZeroDivisionError \(caught\) but the except block) Tj
T* (recomputes int\(len\(sig\) * TARGET_FS / orig_fs\) unguarded,) Tj
T* (causing an unhandled ZeroDivisionError.2 - The interpolation) Tj
T* (fallback path is not itself wrapped in error handling. If the initial) Tj
T* (resample attempt fails, the fallback can still raise exceptions) Tj
T* (\(e.g., due to invalid orig_fs or other edge cases\) and there is no) Tj
T* (catch, so the method can crash instead of returning a safe) Tj
T* (padded/truncated signal. - proof: The except block directly calls) Tj
T* (np.linspace and np.interp without any try/except, so any) Tj
T* (exception raised there \(ZeroDivisionError, ValueError, etc.\) will) Tj
T* (propagate out of the method.3 - The code does not validate the) Tj
T* (computed new_len \(int\(len\(sig\) * TARGET_FS / orig_fs\)\) to) Tj
T* (ensure it is >= 1 before calling resample or using it as the num in) Tj
T* (linspace; passing new_len <= 0 to resample/linspace is invalid) Tj
T* (and leads to exceptions. - proof: new_len can evaluate to 0 \(e.g.,) Tj
T* (very large orig_fs relative to len\(sig\)\) and the code calls) Tj
T* (resample\(sig, new_len\) or uses that value in np.linspace without) Tj
T* (checking, which will raise errors.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 213.8970866141733609 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 202.2777952755906199 Td
(__getitem__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 213.8970866141733609 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 202.2777952755906199 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 213.8970866141733609 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 202.2777952755906199 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 213.8970866141733609 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 202.2777952755906199 Td
(340-382) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 213.8970866141733609 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 202.2777952755906199 Td
(1 - The function uses CLASS_INDEX \(y =) Tj
T* (CLASS_INDEX.get\(label_norm, 0\)\) but CLASS_INDEX is not) Tj
T* (defined in the module/globals, causing a NameError and breaking) Tj
T* (label-to-index mapping. - Proof: The file globals list contains) Tj
T* (CLASS_NAMES, RHYTHM_INDEX, ECTOPY_INDEX but no) Tj
T* (CLASS_INDEX, so referencing CLASS_INDEX will raise a) Tj
T* (NameError at runtime.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 146.2085039370080324 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 134.5892125984253198 Td
(__init__) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 146.2085039370080324 99.2125984251968589 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 134.5892125984253198 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 146.2085039370080324 70.8661417322834666 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 134.5892125984253198 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 146.2085039370080324 56.6929133858267775 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 134.5892125984253198 Td
(390-402) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 146.2085039370080324 212.6028346456064355 -99.8885826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 134.5892125984253198 Td
(1 - Hardcoded DB credentials in __init__) Tj
T* (\(dbname/user/password/host/port\) create security and) Tj
T* (deployment inflexibility - proof: __init__ assigns conn_params =) Tj
T* ({"dbname": "ecg_analysis", "user": "ecg_user", "password":) Tj
T* ("sais", "host": "127.0.0.1", "port": "5432"} directly in the) Tj
T* (constructor.2 - __init__ performs heavy I/O by calling) Tj
T* (_load_all_data\(limit\), causing blocking side-effects and slow) Tj
T* (instantiation - proof: __init__ calls self._load_all_data\(limit\) and) Tj
T* (_load_all_data opens a DB connection, executes a query and) Tj
T* (fetches/processing rows during construction.3 - limit is forwarded) Tj
T* (unsanitized and interpolated into the SQL, enabling SQL injection) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
0.78 G
0. w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 19 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
41 0 obj
<</Type /Page
/Parent 1 0 R
/Resources 2 0 R
/MediaBox [0 0 595.2799999999999727 841.8899999999999864]
/Contents 42 0 R
>>
endobj
42 0 obj
<<
/Length 13584
>>
stream
0. w
0.78 G
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
28.3464566929133888 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
34.0157480314960665 790.2707086614173022 Td
(Function Name) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
127.5590551181102512 801.8899999999999864 99.2125984251968589 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
133.2283464566929183 790.2707086614173022 Td
(File) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
226.7716535433071101 801.8899999999999864 70.8661417322834666 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
232.4409448818897772 790.2707086614173022 Td
(Type) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
297.6377952755905767 801.8899999999999864 56.6929133858267775 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
303.3070866141732722 790.2707086614173022 Td
(Lines) Tj
ET
0.4 0.22 0.82 rg
0.78 G
0. w
0.4 0.22 0.82 rg
354.3307086614173613 801.8899999999999864 212.6028346456064355 -19.3885826771653562 re
f
BT
/F2 7 Tf
8.0499999999999989 TL
1. g
360.0000000000000568 790.2707086614173022 Td
(Issue) Tj
ET
0.78 G
0.8503937007874016 w
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 782.5014173228346408 99.2125984251968589 -35.4885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 782.5014173228346408 99.2125984251968589 -35.4885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 782.5014173228346408 70.8661417322834666 -35.4885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 782.5014173228346408 56.6929133858267775 -35.4885826771653541 re
B
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 782.5014173228346408 212.6028346456064355 -35.4885826771653541 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 770.8821259842519567 Td
(/ malformed-query risk - proof: _load_all_data uses query += f") Tj
T* (LIMIT {limit}" and then cur.execute\(query\), directly inserting limit) Tj
T* (into the SQL string.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 747.0128346456692725 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 735.3935433070865884 Td
(_load_all_data) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 747.0128346456692725 99.2125984251968589 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 735.3935433070865884 Td
(data_loader.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 747.0128346456692725 70.8661417322834666 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 735.3935433070865884 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 747.0128346456692725 56.6929133858267775 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 735.3935433070865884 Td
(407-465) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 747.0128346456692725 212.6028346456064355 -132.0885826771653342 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 735.3935433070865884 Td
(1 - Uses undefined global variable CLASS_INDEX \(will raise) Tj
T* (NameError - CLASS_INDEX is not present in the provided) Tj
T* (globals\) - Proof: the module globals shown do not define) Tj
T* (CLASS_INDEX while the function directly references) Tj
T* (CLASS_INDEX, which will raise a NameError at runtime.2 -) Tj
T* (Hardcodes TARGET_LEN = 2500 instead of using the existing) Tj
T* (global SEG_LEN / TARGET_FS constants - Proof: the file defines) Tj
T* (SEG_LEN = TARGET_FS * 10 \(2500\) but the function sets) Tj
T* (TARGET_LEN = 2500 literal rather than using SEG_LEN or) Tj
T* (TARGET_FS.3 - Builds the SQL LIMIT by string concatenation) Tj
T* (instead of using parameterized queries, creating a potential SQL) Tj
T* (injection / safety issue - Proof: the code appends f" LIMIT {limit}") Tj
T* (directly into the query string without parameterization or) Tj
T* (validation, allowing an attacker-controlled limit value to inject) Tj
T* (SQL.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 614.9242519685039952 99.2125984251968589 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 603.304960629921311 Td
(print_report) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 614.9242519685039952 99.2125984251968589 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 603.304960629921311 Td
(evaluate_simple.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 614.9242519685039952 70.8661417322834666 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 603.304960629921311 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 614.9242519685039952 56.6929133858267775 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 603.304960629921311 Td
(68-139) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 614.9242519685039952 212.6028346456064355 -43.5385826771653512 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 603.304960629921311 Td
(1 - The function accepts a 'cm' \(confusion matrix\) parameter but) Tj
T* (never uses or prints it, so the confusion matrix passed to) Tj
T* (print_report is ignored. - Proof: 'cm' appears only in the function) Tj
T* (signature and is not referenced anywhere in the function body.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 571.3856692913385587 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 559.7663779527558745 Td
(evaluate) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 571.3856692913385587 99.2125984251968589 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 559.7663779527558745 Td
(evaluate_simple.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 571.3856692913385587 70.8661417322834666 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 559.7663779527558745 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 571.3856692913385587 56.6929133858267775 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 559.7663779527558745 Td
(142-242) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 571.3856692913385587 212.6028346456064355 -67.6885826771653427 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 559.7663779527558745 Td
(1 - When saving the evaluation report the code sets sys.stdout =) Tj
T* (f and only restores it after print_report; if print_report \(or any code) Tj
T* (between\) raises, sys.stdout is not restored \(no finally block\) - The) Tj
T* (code assigns original_stdout = sys.stdout; sys.stdout = f; then) Tj
T* (calls print_report and only afterwards restores sys.stdout, with no) Tj
T* (try/finally, so an exception during print_report will skip the restore) Tj
T* (and leave global stdout redirected to the file.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 503.6970866141732586 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 492.0777952755905744 Td
(forward) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 503.6970866141732586 99.2125984251968589 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 492.0777952755905744 Td
(calibration.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 503.6970866141732586 70.8661417322834666 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 492.0777952755905744 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 503.6970866141732586 56.6929133858267775 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 492.0777952755905744 Td
(25-27) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 503.6970866141732586 212.6028346456064355 -59.6385826771653527 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 492.0777952755905744 Td
(1 - The forward method returns scaled logits \(logits / T\) but does) Tj
T* (not apply softmax, contradicting the class docstring which states) Tj
T* (it applies to model probabilities \(effectively softmax\(logits / T\)\). -) Tj
T* (proof: temperature_scale simply returns logits / temperature and) Tj
T* (neither temperature_scale nor forward call softmax, so the output) Tj
T* (are logits not probabilities.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 444.058503937007913 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 432.4392125984252857 Td
(temperature_scale) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 444.058503937007913 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 432.4392125984252857 Td
(calibration.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 444.058503937007913 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 432.4392125984252857 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 444.058503937007913 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 432.4392125984252857 Td
(29-35) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 444.058503937007913 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 432.4392125984252857 Td
(1 - The function does not enforce temperature > 0 \(no positivity) Tj
T* (constraint\); as an unconstrained nn.Parameter it can become) Tj
T* (zero or negative during optimization, causing division-by-zero or) Tj
T* (invalid calibration behavior. - Proof: temperature is declared as) Tj
T* (an unconstrained nn.Parameter\(torch.ones\(1\)*1.5\) and is used) Tj
T* (directly in logits / temperature with no clamp/abs/softplus, so an) Tj
T* (optimizer can set it to 0 or negative producing division-by-zero or) Tj
T* (sign flips.  2 - The implementation assumes logits are 2D) Tj
T* (\(batch_size, num_classes\) and expands temperature to) Tj
T* (\(batch_size, num_classes\); it will fail or behave incorrectly for) Tj
T* (logits with additional spatial dimensions \(e.g., \(N, C, H, W\)\) or) Tj
T* (other shapes. - Proof: code expands temperature to) Tj
T* (\(logits.size\(0\), logits.size\(1\)\) producing shape \(N,C\), which) Tj
T* (cannot broadcast against a logits tensor of shape \(N,C,H,W\)) Tj
T* (\(mismatched trailing dims\) and will raise a shape/broadcasting) Tj
T* (error.) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
28.3464566929133888 303.9199212598425675 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
34.0157480314960665 292.3006299212598833 Td
(set_temperature) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
127.5590551181102512 303.9199212598425675 99.2125984251968589 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
133.2283464566929183 292.3006299212598833 Td
(calibration.py) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
226.7716535433071101 303.9199212598425675 70.8661417322834666 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
232.4409448818897772 292.3006299212598833 Td
(Function) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
297.6377952755905767 303.9199212598425675 56.6929133858267775 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
303.3070866141732722 292.3006299212598833 Td
(37-81) Tj
ET
1. g
0.78 G
0.2834645669291339 w
1. g
354.3307086614173613 303.9199212598425675 212.6028346456064355 -140.1385826771653456 re
B
BT
/F1 7 Tf
8.0499999999999989 TL
0.314 g
360.0000000000000568 292.3006299212598833 Td
(1 - Unconditionally calling self.cuda\(\) instead of moving the) Tj
T* (module to the provided device \(e.g., self.to\(device\)\), creating) Tj
T* (possible device mismatches with criteria/inputs moved to device -) Tj
T* (proof: the code calls self.cuda\(\) while nll_criterion/ece_criterion) Tj
T* (are .to\(device\) and inputs are input.to\(device\), so if device !=) Tj
T* (default CUDA device a mismatch can occur.  2 - The function) Tj
T* (never sets the model to evaluation mode before collecting) Tj
T* (validation logits, leaving dropout/BatchNorm active and corrupting) Tj
T* (calibration - proof: logits are collected inside with torch.no_grad\(\)) Tj
T* (by calling self.model\(input\) but there is no self.eval\(\) or) Tj
T* (self.model.eval\(\) call.  3 - The temperature parameter is) Tj
T* (optimized unconstrained as a raw nn.Parameter and can become) Tj
T* (non-positive \(no reparametrization like optimizing log T\) - proof:) Tj
T* (temperature is defined as nn.Parameter and optimizer =) Tj
T* (torch.optim.LBFGS\([self.temperature]\) is used with no constraints) Tj
T* (or exponentiation applied.) Tj
ET
0.78 G
0.8503937007874016 w
0.78 G
0. w
0.78 G
0.8503937007874016 w
0.78 G
0.8503937007874016 w
BT
/F1 8 Tf
9.1999999999999993 TL
0.588 g
224.1199999999999477 14.1732283464566535 Td
(Page 20 of 20 | Generated by CodeAnt AI) Tj
ET
endstream
endobj
1 0 obj
<</Type /Pages
/Kids [3 0 R 5 0 R 7 0 R 9 0 R 11 0 R 13 0 R 15 0 R 17 0 R 19 0 R 21 0 R 23 0 R 25 0 R 27 0 R 29 0 R 31 0 R 33 0 R 35 0 R 37 0 R 39 0 R 41 0 R ]
/Count 20
>>
endobj
43 0 obj
<<
/Type /Font
/BaseFont /Helvetica
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
44 0 obj
<<
/Type /Font
/BaseFont /Helvetica-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
45 0 obj
<<
/Type /Font
/BaseFont /Helvetica-Oblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
46 0 obj
<<
/Type /Font
/BaseFont /Helvetica-BoldOblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
47 0 obj
<<
/Type /Font
/BaseFont /Courier
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
48 0 obj
<<
/Type /Font
/BaseFont /Courier-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
49 0 obj
<<
/Type /Font
/BaseFont /Courier-Oblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
50 0 obj
<<
/Type /Font
/BaseFont /Courier-BoldOblique
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
51 0 obj
<<
/Type /Font
/BaseFont /Times-Roman
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
52 0 obj
<<
/Type /Font
/BaseFont /Times-Bold
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
53 0 obj
<<
/Type /Font
/BaseFont /Times-Italic
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
54 0 obj
<<
/Type /Font
/BaseFont /Times-BoldItalic
/Subtype /Type1
/Encoding /WinAnsiEncoding
/FirstChar 32
/LastChar 255
>>
endobj
55 0 obj
<<
/Type /Font
/BaseFont /ZapfDingbats
/Subtype /Type1
/FirstChar 32
/LastChar 255
>>
endobj
56 0 obj
<<
/Type /Font
/BaseFont /Symbol
/Subtype /Type1
/FirstChar 32
/LastChar 255
>>
endobj
57 0 obj
<<
/Type /XObject
/Subtype /Image
/Width 202
/Height 41
/ColorSpace [/Indexed /DeviceRGB 252 59 0 R]
/BitsPerComponent 8
/DecodeParms <</Predictor 12 /Colors 1 /BitsPerComponent 8 /Columns 202>>
/SMask 58 0 R
/Length 1896
/Filter /FlateDecode
>>
stream
hÞÝk@TeÇÿFPAQÜEÜRQ´TVWÍ\5#Y§L³Ýp×ÛJµ¦hf6()b^Pï¹ºÞØ-JÂR4o)2\aþ_öÃ9gæÑ>MÏ§yyßçß{yç}àBÚuóÂ¯@z%G2ÛóAúj&I^Ðz8HÀKöÌÙÉÓ§dèõêôá¿Mcí.@À¤{OöÉþE#OÖ_¯ñG(Kñ+	#l:¨üÒwj¡µâGC<%õcöýk½1äY?Ï#ùkaÇÎ9)Î/Þ>Üêq$ïE{©¥5¨%êí{OM\2{D;·¼i¹ËÿÚéõöCõáE£×;U&>çû}ÛºSÔ¹7U\y/q¡rmç¶ü;]þ7<ñÀ$>wÉH»B:Fr]ðçºëêÑÈÚÿýëC·ÉòØ_òÙÜãAQ$ßw2Ä9c»úÝâc{ Ð®²qü/@ée«ûKïÓ÷?½[ð0oj] äÑX¡wÄ¯Åa²Òé4+º?<Ê2îÌ÷I^çùd+[5¬ÔQ%öº;)«Y¥X]nqÃC£9Þ·Ãe>?F2÷«¢hH. t¾mVsR5>2eZ¤3ýÁP
ø"ØÐIå9\wª,ÝÔ·¿ñN{¥þÉ$-·ðÙï®§èî²(ÖKôòò×ï¶k¬GðÉ¾Ïóo§$  <6hÐUN4ÈÛé"XÝÈçìÖ(È!Éz©î²ehî²»Uí=ýsûKqWIÈ(ÞïÏ8õÔÂ·áGNR<{$yÀÀ§Ò+9oÆdfxgZ¡Îëg£\ùÇû \p^_²¼ÅWâßúæ Àd+Æ½z¯~¢=Æ²¤ÑC§åò®4u/ð[ xÇd[¼íÅÏw4ñ# 3M¦;Ì4üÒðO Ù»Jàuã¡ìë*dÉs\£Üåsj;è÷w  ÝzVèifª B¿¹!¢,çWÁ üVLÏñu ·YC%ÖlÖ@#\ìþä ¹²Ê5¿¹&4&ßh!yóÌ
õ³O«Wð+iEG¸@OH1¶gÍ jê¤À'ä3 B¬Ý  r¡R$yÉæ{.Pvò] @<ox9¡DÚvæD©ý.47¿î¥ÚÑe´gý>´tp1²a#Í ^á.Ù0 Q^X	ü^F1JMÞàu¿iaéÊ¥'È(Û8m¡2_Îzù$Ù<ÑÊNomìÃjÇ­F1ÇAÏz¬O¤À&é%I`. åbÿZPúLáqu¿ðKéW46®Ê²CBY/·ö?C5¿WG9Â-­Ñ,r(Yü;ñ]@3,ed9 MqÑ¢|Î4	EV£Ã­R§7Xë¯@ÅpTr_i¯\/dú¥Þk¼î|­ÔCïX1r31íz$Í Òd°KÕJ¶rÒJX³²We.!Ï>TÁrð2åk?øÓÁÅÆÁd¥ü;Æ¡ëìÀb0ÞÆN~4¥Ü·YrÆ»²çíNð¤%©ÈµC^ìd¿*Ë.ÞTlø,
-=mÖ hªTÌql{ ÀX:Rñ*rå<§8
¢fÞÁ$d+f¬x®t:NÕKª;<`'Ifóh ëx\í<`³$½k%Í º7ÖKÙ³¸ØÍÕýiéìJï)ª¦ãü§e)8¥zë	cL¼­Sey¦ÅRè}<\ ÝÊ¦ a1ëûx¢KÄ-ï"ÓxR¼9xôg-û+|r¾;(iÌPh/ó²`GÙÈMXÂrnûæä3êA,º¼ôÁ¢«>·Ñ"í¨Ñfþ-b}<0<ziåf ðýfõíµä6×	,Tº\À¯Ý@Ñs2Çù%ùø#]ÊN¹¥kz4íð3Ò8ÈÅÀì{$ÉO£T,';lµ$Þ\&:§Ø¿m¼êtLÛÎ;J4ýñ½KrXGÃ²-ÛVOUfüïìØãÔÁ36ý{Ý`\¼|)±/}NW Â$C Ã1^ÀòÑç·qøÇ:5`rênø: ík8Ó\OK]íåu?!Û%JWB"3ï¤YçI·[Éè¸Á¦âYñ|kµ²ßÚ¤JïQ(ðJªc^ _[Öän´ÇÝ|¯«°¤<hb·W8@j3B=ñÓÏXSº  BÄ¬ÓÙéÓ<áÿu4
endstream
endobj
58 0 obj
<<
/Type /XObject
/Subtype /Image
/Width 202
/Height 41
/ColorSpace /DeviceGray
/BitsPerComponent 8
/DecodeParms <</Predictor 12 /Colors 1 /BitsPerComponent 8 /Columns 202>>
/Length 2419
/Filter /FlateDecode
>>
stream
x^Õ{\MÙÀ×¹)!=(Õõ(ôAGd%nH×#?¯ªo)yDyGn¨hÊ5hj$yáÆ¤É­;û¼î=g+5ÿÝùöù³×Ú{í{Ö9kï½öN MÐºG×&ë4Æ·WØO¥eqµfÓ+ÖIAýÐÝ¢^£Ñ|éÁÎ¼Éå	Ë'öïh©Àë4/\òpþ1§î3÷\|ð¯ÒppWü~¹ØkAÁÔ­§ïÜNJ	Ü@sá»BD["Y.]í5dËÔÐô¹ÿgx®û{Ì}äÞðÚv[îeì¥Î¸ÂseprÕ³;ÌBî¼WâÏ[Áö®¹ðÝ=ÜH3áº2g¸§ÁU¥íéÏjÕ5§`¿³ÑP8®ôi{ëèÕ¼úQ9ã°Xyû/vj«Ã`ÛF\¥¢µPØ×5©ÐB-h	Èµ+ºq¥üãq
÷½¸¡íWT¿sÓ¾__ï2Áë¾D?®R1§¸8×5n~ñS;d\\lÈueÙÓ§®â6 9Öa¸
 g^TïkG÷%¿5\ñØ¯ýWø üÏW6ÇD#ÙNåÊ·g¦ÔDaµMai]±ÔÄu»©èqÊx¼þ_Ðkhíu×rHYá*ÒÿðÆò*+;µd¡Ì )ô;®!
©CN\7¼EËñ!RbÐW«±qh« Ó¸úe¯:ccue¢ÌM}4Á:ËJ×ç¬ðnòkñ-'+{Åõ_göç'ñc\ÑÚ
à cÔ7û£°¦T-¾Ùb]¼MKq¾¾V{ªæðèo"æc\q³E£IéßÕ°Æ-1<ÛWãÊqaQèÅâ-áßsÌµ]ÖFH\¹kWGñÆjY	
ôT"ö@Öº¢õþý)±.ôupÐætAÆ\Õx$kíÅÓR?cß· dg4º.Ì?j Åk1
®Rãå/
7³O÷­Yù(Üì|Wº90ôJÑ·lKíÐÇCwÜKïÃ(ÚLC~@ÆÉ"ë:L|~f]àÎ¼óúH<$C¼LÆ¼*1ûÈÿ-IWF°IÙ(!æäåµâã ¸Ä>Ç½,T4eÝc(ÅôÌóWMiN¿bh"ù+x£ø¦sóé&<ÈPÆ©ªGòÛ5^Kã	HJ«caaUÜÒò8²®n0onC®?=A^ÿVIÞ,Ï]ÂmÅÇ^á*QR§Ä>k¤6ÚDë%bóÃZöá)	+úî§ü8în¿-iYq#·%ÐQ'&?

QåS¦"îpÿÐ³ÑbOåx'É[Ø+|àþÒ¨nÏo¢ü22çzÜ×áäZ¨ó5u0²:r°n#Å¹Í¸@ùhvw&úì¨e?yJ ^=©(sG¢c@í49U
Ù¹÷ÎcëO÷t­Yl?%K©ÍkÊ5 îâÈû	ðáCØy%÷fVÛX%(øýÍê@¼e54+¾Âä¡ÊUàÕ*iÅ32P4µ;ÏL|(¢¨çÙ*µRP¿`òM\KVÅGÏ/Kòî£9zW¨(¤oùCdÈ@îÎíÙÂXu©ú-j;E§O·X!C5P/´¤×ØdÚf2÷2 Ç}#x¶Ëù*Ôæ|»ò9ôfîïFgUñ¬Cp
I(UjüÝ»åu¬\B]»Àæb@ùØÙ+>ºPÊS=Õæ^M¤ bxH¹Ç]£Á?Á[È>¸¡k»X|çOs\ùéP´_ôµ[^º¤a"AHá­SiÂtºmsÇ<=F/c´ÚNUWúÁchÏçX§äã^£«Ó2^',çßxre«â>P=Ô[ Q]U÷ ®oà©TE*5©J±ÈåÞßUFiÜX¢¢zö2æ«PÃðÇFÃµôDÐs±ÈÁ£wÃX¹m}Uµqd.Ô5«­cºÏXÈr´¥É6©f78³\ioáohv¾`)½J%q?¬ÕÝXØæÖ&»úxXÇ~Ä¥
¨¿dt¡2¹Î]=¡9Å×Ij²¦ñ-ØÃ²ú¤^¤h»Ã@m$¹iåÞò~d@¼ %&ù¼]7<ÙpY¦ÁÚ4TØ&Iå;Äjñ'2UÞ®p¦Jé¡üên=÷hÐwgç/¹Ú3ÕRÓø ÙN-¡I\59êÐÜó¯±ÖÈ¨ÒÇÇÎ Ë&t
siB¥å'ÑánWl#uå¢ê¥y~Ã}3¶~¹Á°)}Þ0Ábú»åÏ[dÝmPðÓÝY0µmîCN¥å+èLçúç«ÎlYPRª¸ô/ Ï¦ã54×­ÿÝsIè®Cì#i]S¶mÔíÌ#cÉô	 lÉçÛ©±Ùô¡mí¨óý^foÒß@¾_z¥c8¥À¦¡_a¼ñ³tX}^=ÄÁN?ón¡¢Óx½ÀD´ñÈñY=<³ºûÎãNµ#3$ý=<»ÇÛü&øÒoüã|ËXéa?óõJ ¢E¼­Â	¢Z´©±IQ>¥ñÑ«MÈK=Ç#ÖÐG¥HÎuf@#ÆqKtÝÿç¬<YÆQ)og­JU¯òC¼úðóFS¼ËW´`9Ó+¥ï9¶èÌMúMôRÔâ¥N®ðÝæðJ¤?|JÑj,¨¹kõâ9iaàoz4ìo"^(ëjÿÎ¿&ó*Gíç TU¥ñ ueYíª]28Q½^©¨üÊLÓ@®Ôz×®H³¹;­Ïnr8ry?µ¥çI k4l±ÙcaøÔ¿û¸±Qk{o¯ÁÐiSÉònáÔ_ml»8öÆ½{YWÏ7õåÎ´Ï?Í³!
endstream
endobj
59 0 obj
<<
/Length 759
>>
stream
              @ 33+++$$$   3.+'$$""     -+(&$#!, +)'&$#+!) ('&$+)(' &%$*)('&%$)('&&%)(('&&%((''&)(('&&%((''&&('''&&((''&&(('''&&((''&&(('''&&(('''&('''&&(('''&&(''''&(('''&(''''&(''''&&(''''&('''''(''''&('''''&('''''('''''&('''''('''''&('''''&''''''''''''&'''''''''''''''''''''''ÿÿÿ
endstream
endobj
2 0 obj
<<
/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]
/Font <<
/F1 43 0 R
/F2 44 0 R
/F3 45 0 R
/F4 46 0 R
/F5 47 0 R
/F6 48 0 R
/F7 49 0 R
/F8 50 0 R
/F9 51 0 R
/F10 52 0 R
/F11 53 0 R
/F12 54 0 R
/F13 55 0 R
/F14 56 0 R
>>
/XObject <<
/I0 57 0 R
>>
>>
endobj
60 0 obj
<<
/Producer (jsPDF 3.0.1)
/CreationDate (D:20260205122857+05'30')
>>
endobj
61 0 obj
<<
/Type /Catalog
/Pages 1 0 R
/OpenAction [3 0 R /FitH null]
/PageLayout /OneColumn
>>
endobj
xref
0 62
0000000000 65535 f 
0000280470 00000 n 
0000288074 00000 n 
0000000015 00000 n 
0000000152 00000 n 
0000010207 00000 n 
0000010344 00000 n 
0000023341 00000 n 
0000023478 00000 n 
0000037063 00000 n 
0000037201 00000 n 
0000051658 00000 n 
0000051797 00000 n 
0000066397 00000 n 
0000066536 00000 n 
0000080143 00000 n 
0000080282 00000 n 
0000095028 00000 n 
0000095167 00000 n 
0000109918 00000 n 
0000110057 00000 n 
0000124762 00000 n 
0000124901 00000 n 
0000139473 00000 n 
0000139612 00000 n 
0000153110 00000 n 
0000153249 00000 n 
0000166890 00000 n 
0000167029 00000 n 
0000181745 00000 n 
0000181884 00000 n 
0000195583 00000 n 
0000195722 00000 n 
0000210244 00000 n 
0000210383 00000 n 
0000225113 00000 n 
0000225252 00000 n 
0000238860 00000 n 
0000238999 00000 n 
0000252633 00000 n 
0000252772 00000 n 
0000266693 00000 n 
0000266832 00000 n 
0000280658 00000 n 
0000280784 00000 n 
0000280915 00000 n 
0000281049 00000 n 
0000281187 00000 n 
0000281311 00000 n 
0000281440 00000 n 
0000281572 00000 n 
0000281708 00000 n 
0000281836 00000 n 
0000281963 00000 n 
0000282092 00000 n 
0000282225 00000 n 
0000282327 00000 n 
0000282423 00000 n 
0000284599 00000 n 
0000287263 00000 n 
0000288338 00000 n 
0000288424 00000 n 
trailer
<<
/Size 62
/Root 61 0 R
/Info 60 0 R
/ID [ <CF68990C1F4C094B8D533F357D903318> <CF68990C1F4C094B8D533F357D903318> ]
>>
startxref
288528
%%EOF